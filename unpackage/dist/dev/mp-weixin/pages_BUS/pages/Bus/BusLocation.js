(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_BUS/pages/Bus/BusLocation"],{622:
/*!**********************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/main.js?{"page":"pages_BUS%2Fpages%2FBus%2FBusLocation"} ***!
  \**********************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){n(/*! uni-pages */4);i(n(/*! vue */2));var e=i(n(/*! ./pages_BUS/pages/Bus/BusLocation.vue */623));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},623:
/*!*************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages_BUS/pages/Bus/BusLocation.vue ***!
  \*************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! ./BusLocation.vue?vue&type=template&id=2d157bf3& */624),a=n(/*! ./BusLocation.vue?vue&type=script&lang=js& */626);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n(/*! ./BusLocation.vue?vue&type=style&index=0&lang=scss& */628);var r,s=n(/*! ../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),u=Object(s["default"])(a["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],r);u.options.__file="pages_BUS/pages/Bus/BusLocation.vue",e["default"]=u.exports},624:
/*!********************************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages_BUS/pages/Bus/BusLocation.vue?vue&type=template&id=2d157bf3& ***!
  \********************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./BusLocation.vue?vue&type=template&id=2d157bf3& */625);n.d(e,"render",(function(){return i["render"]})),n.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(e,"components",(function(){return i["components"]}))},625:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages_BUS/pages/Bus/BusLocation.vue?vue&type=template&id=2d157bf3& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,n){"use strict";n.r(e),n.d(e,"render",(function(){return a})),n.d(e,"staticRenderFns",(function(){return r})),n.d(e,"recyclableRender",(function(){return o})),n.d(e,"components",(function(){return i}));var i={uPopup:function(){return n.e(/*! import() | uview-ui/components/u-popup/u-popup */"uview-ui/components/u-popup/u-popup").then(n.bind(null,/*! @/uview-ui/components/u-popup/u-popup.vue */821))}},a=function(){var t=this,e=t.$createElement;t._self._c},o=!1,r=[];a._withStripped=!0},626:
/*!**************************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages_BUS/pages/Bus/BusLocation.vue?vue&type=script&lang=js& ***!
  \**************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./BusLocation.vue?vue&type=script&lang=js& */627),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},627:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages_BUS/pages/Bus/BusLocation.vue?vue&type=script&lang=js& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){var i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){n.e(/*! require.ensure | pages_BUS/commponents/BUS/BUS */"pages_BUS/commponents/BUS/BUS").then(function(){return resolve(n(/*! ../../commponents/BUS/BUS.vue */878))}.bind(null,n)).catch(n.oe)},o={components:{BusTimeSteps:a},data:function(){return{startStation:"",endStation:"",price:"1元",direction:"row",isClickTurnButton:!1,stationInfoArray:[],firstLastTimeArray:[],lineDirection:"",lineID:"",stationList:[],carLocationArray:[],serverTime:"",markStationIndex:"",isShow:!1,timeArray:[],timer:null,lastPage:""}},onLoad:function(e){if(i=this,i.lastPage="",i.stationInfoArray=JSON.parse(decodeURIComponent(e.lineRoute)),"上行"==i.stationInfoArray.LineRouteDirection||0==i.stationInfoArray.LineRouteDirection?i.lineDirection=0:i.lineDirection=1,i.getServerTime(),"SearchDetail"==e.lastPage||"BusQuery"==e.lastPage)t.setNavigationBarTitle({title:i.stationInfoArray.lineName}),i.lastPage="BusQuery",i.firstLastTimeArray=i.stationInfoArray.firstLastTime.split("-"),i.lineID=i.stationInfoArray.lineID,i.startStation=i.stationInfoArray.StartName+"→"+i.stationInfoArray.EndName,i.getStationByLine(),i.getBusLocationByStation();else{i.lastPage="RoutePlan",t.setNavigationBarTitle({title:i.getLine(i.stationInfoArray.LineRoute)});var n=i.getStartEndStation(i.stationInfoArray.LineRoute);i.startStation=n[0].substring(1,n[0].length),i.getBusLineInfoByStationName()}i.setBusTimeInterval()},onUnload:function(){clearInterval(i.timer),i.timer=null},methods:{setBusTimeInterval:function(){i.timer=setInterval((function(){i.getBusLocationByStation()}),1e4)},getBusLocationOntime:function(){i.getBusLocationByStation()},turnImageClick:function(){var t=i.startStation.split("→");i.startStation=t[1]+"→"+t[0],"RoutePlan"==i.lastPage?0==i.lineDirection?(i.lineDirection=1,i.getBusLineInfoByStationName()):1==i.lineDirection&&(i.lineDirection=0,i.getBusLineInfoByStationName()):0==i.lineDirection?(i.lineDirection=1,i.getStationByLine(),i.getBusLocationByStation()):1==i.lineDirection&&(i.lineDirection=0,i.getStationByLine(),i.getBusLocationByStation())},turnDirection:function(){i.isClickTurnButton=!i.isClickTurnButton,i.isClickTurnButton?i.direction="column":i.direction="row"},getLine:function(t){return t.substring(0,t.indexOf("("))},getStartStation:function(t){var e=t.match(/(\(\S*)(?=→)/);return e[1].substring(1,e[1].length)},getStartEndStation:function(t){var e=t.match(/(\(\S*)(?=\))/);return e},getScheduleTime:function(t){return t.split(" ")},timeButtonClick:function(){i.isShow=!i.isShow,i.getTimeScheduleInfo()},getBusLineInfoByStationName:function(){t.request({url:i.$Bus.BusInterface.getBusLineInfoByStationName.Url,method:i.$Bus.BusInterface.getBusLineInfoByStationName.method,data:{stationName:i.getStartStation(i.stationInfoArray.LineRoute),Encryption:i.$Bus.BusInterface.publicCode.encryption},success:function(e){if(console.log("请求线路信息成功",e),e.data.status)for(var n=i.getLine(i.stationInfoArray.LineRoute),a=0;a<e.data.data.length;a++)n==e.data.data[a].lineName&&i.lineDirection==e.data.data[a].lineDirection&&(i.price=e.data.data[a].PriceDescribe,i.firstLastTimeArray=e.data.data[a].firstLastTime.split("-"),i.lineID=e.data.data[a].lineID,i.getStationByLine(),i.getBusLocationByStation());else t.showToast({title:e.data.msg,icon:"none"})},fail:function(t){console.log("请求失败",t)}})},getStationByLine:function(){t.showLoading({title:"加载中..."}),t.request({url:i.$Bus.BusInterface.getBusLineStationInfoByLineIdDirection.Url,method:i.$Bus.BusInterface.getBusLineStationInfoByLineIdDirection.method,data:{lineId:i.lineID,direction:i.lineDirection,Encryption:i.$Bus.BusInterface.publicCode.encryption},success:function(e){if(t.hideLoading(),e.data.status){i.stationList=e.data.data;for(var n=0;n<e.data.data.length;n++)i.stationInfoArray.ChangStation==e.data.data[n].stationName&&(i.markStationIndex=n)}else t.showToast({title:e.data.msg,icon:"none"})},fail:function(e){t.hideLoading(),console.log("请求失败",e)}})},getBusLocationByStation:function(){t.request({url:i.$Bus.BusInterface.getBusArriveLeaveStationInfoByLineIdDirection.Url,method:i.$Bus.BusInterface.getBusArriveLeaveStationInfoByLineIdDirection.method,data:{lineId:i.lineID,direction:i.lineDirection,Encryption:i.$Bus.BusInterface.publicCode.encryption},success:function(e){if(e.data.status){for(var n=0;n<e.data.data.length;n++){var a=new Date(e.data.data[n].generationTime).getTime(),o=i.serverTime-a,r=o/3600;r>=30&&e.data.data.splice(n,1)}i.carLocationArray=e.data.data,console.log("请求实时到站信息成功",i.carLocationArray)}else"无数据！"!=e.data.msg&&t.showToast({title:e.data.msg,icon:"none"})},fail:function(t){console.log("请求实时到站信息失败",t)}})},getTimeScheduleInfo:function(){t.showLoading({title:"加载中..."}),t.request({url:i.$Bus.BusInterface.getBusLineScheduleInfoByLineIdDirection.Url,method:i.$Bus.BusInterface.getBusLineScheduleInfoByLineIdDirection.method,data:{lineId:i.lineID,direction:i.direction,Encryption:i.$Bus.BusInterface.publicCode.encryption},success:function(e){if(t.hideLoading(),i.timeArray=[],e.data.status)for(var n=0;n<e.data.data.length;n++){var a={foreStartTime:i.getScheduleTime(e.data.data[n].foreStartTime)[1]};i.timeArray.push(a)}else t.showToast({title:e.data.msg,icon:"none"})},fail:function(e){t.hideLoading(),console.log(e)}})},getServerTime:function(){t.request({url:i.$Bus.BusInterface.getServerTime.Url,method:i.$Bus.BusInterface.getServerTime.method,data:{Encryption:i.$Bus.BusInterface.publicCode.encryption},success:function(e){e.data.status?i.serverTime=new Date(e.data.data).getTime():t.showToast({title:e.data.msg,icon:"none"})},fail:function(t){console.log("请求实时到站信息失败",t)}})}}};e.default=o}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},628:
/*!***********************************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages_BUS/pages/Bus/BusLocation.vue?vue&type=style&index=0&lang=scss& ***!
  \***********************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./BusLocation.vue?vue&type=style&index=0&lang=scss& */629),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},629:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages_BUS/pages/Bus/BusLocation.vue?vue&type=style&index=0&lang=scss& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){}},[[622,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages_BUS/pages/Bus/BusLocation.js.map