(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets"],{490:
/*!*****************************************************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/main.js?{"page":"pages_ZXGP%2Fpages%2FZXGP%2FTraditionSpecial%2FOrder%2FselectTickets"} ***!
  \*****************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){n(/*! uni-pages */4);a(n(/*! vue */2));var t=a(n(/*! ./pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue */491));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},491:
/*!****************************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue ***!
  \****************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var a=n(/*! ./selectTickets.vue?vue&type=template&id=19d7a8f6& */492),i=n(/*! ./selectTickets.vue?vue&type=script&lang=js& */494);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n(/*! ./selectTickets.vue?vue&type=style&index=0&lang=scss& */496);var s,r=n(/*! ../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),c=Object(r["default"])(i["default"],a["render"],a["staticRenderFns"],!1,null,null,null,!1,a["components"],s);c.options.__file="pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue",t["default"]=c.exports},492:
/*!***********************************************************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue?vue&type=template&id=19d7a8f6& ***!
  \***********************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";n.r(t);var a=n(/*! -!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectTickets.vue?vue&type=template&id=19d7a8f6& */493);n.d(t,"render",(function(){return a["render"]})),n.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return a["recyclableRender"]})),n.d(t,"components",(function(){return a["components"]}))},493:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue?vue&type=template&id=19d7a8f6& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return s})),n.d(t,"recyclableRender",(function(){return o})),n.d(t,"components",(function(){return a}));var a={uEmpty:function(){return n.e(/*! import() | uview-ui/components/u-empty/u-empty */"uview-ui/components/u-empty/u-empty").then(n.bind(null,/*! @/uview-ui/components/u-empty/u-empty.vue */704))}},i=function(){var e=this,t=e.$createElement,n=(e._self._c,e.__map(e.allTicketsList,(function(t,n){var a=e.__get_orig(t),i=e.isFlowTickets(t),o=e.isFlowTickets(t),s=e.turnDate(t.setTime),r="普通班车"==t.shuttleType?t.duration.slice(0,-2):null,c="定制班车"==t.shuttleType?t.duration.slice(0,-2):null,u="定制班车"==t.shuttleType?e.turnValue(t.lineViaSiteDesc):null;return{$orig:a,m0:i,m1:o,m2:s,g0:r,g1:c,m3:u}})));e.$mp.data=Object.assign({},{$root:{l0:n}})},o=!1,s=[];i._withStripped=!0},494:
/*!*****************************************************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var a=n(/*! -!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectTickets.vue?vue&type=script&lang=js& */495),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},495:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue?vue&type=script&lang=js& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(/*! @/common/Ctky.js */43)),i=o(n(/*! @/pages_ZXGP/components/ZXGP/shoyu-date/utils.filter.js */431));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){n.e(/*! require.ensure | pages_ZXGP/components/ZXGP/mx-datepicker/mx-datepicker */"pages_ZXGP/components/ZXGP/mx-datepicker/mx-datepicker").then(function(){return resolve(n(/*! @/pages_ZXGP/components/ZXGP/mx-datepicker/mx-datepicker.vue */814))}.bind(null,n)).catch(n.oe)},r={components:{MxDatePicker:s},data:function(){return{utils:i.default,dateArray:[],selectIndex:"",date:"",showPicker:!1,type:"rangetime",value:"",startStation:"",endStation:"",isNormal:"",departureData:[],stationArray:[],isEndores:"",endoresDate:"",endoresOrderNum:"",endorescompanyCode:"",scheduleDetailNum:"",allTicketsList:[]}},onLoad:function(t){e.showToast({title:"查询班次中...",icon:"none"});var n=this;n.startStation=t.startStation,n.endStation=t.endStation,n.isNormal=t.isNormal,console.log("起点",n.startStation),console.log("终点",n.endStation),console.log("状态",n.isNormal),"date"==t.date?(n.loadDate(t.date),n.getTicketInfo(t.date)):(n.date=t.date,n.loadDate(t.date),n.getTicketInfo(this.date))},onPullDownRefresh:function(){e.showToast({title:"查询班次中...",icon:"none"}),this.getTicketInfo(this.date)},methods:{getOpenID:function(){var t=this;e.getStorage({key:"scenicSpotOpenId",success:function(e){e.data?console.log("当前没有有openid",e):t.getCode()},fail:function(e){t.getCode()}})},getTicketInfo:function(t){var n=this;e.showToast({title:"查询班次中...",icon:"loading"}),"date"==t&&(t=new Date),n.allTicketsList=[];var a="";a=this.$ky_cpdg.KyInterface.system.systemNameWeiXin,console.log(a),e.request({url:this.$ky_cpdg.KyInterface.getListSchedulesInfo.Url,method:this.$ky_cpdg.KyInterface.getListSchedulesInfo.method,data:{systemName:a,startPosition:n.startStation,endPosition:n.endStation,date:t},success:function(t){e.stopPullDownRefresh(),console.log("111",t),e.hideLoading();var a=t.data,i=JSON.parse(a);if(1==i.status)if(0!==i.data){n.departureData=i.data,console.log("111111111",n.departureData);var o=0;for(o;o<i.data.length;o++)n.allTicketsList.push(i.data[o]);console.log("客运班次信息",n.allTicketsList),e.hideLoading()}else 0==i.data.length&&(e.showToast({title:"暂无班次信息",icon:"none"}),e.hideLoading());else 0==i.status&&(e.showToast({title:"暂无班次信息",icon:"none"}),e.hideLoading())},fail:function(t){e.showToast({title:"服务器异常，班次列表数据出错",icon:"none"}),e.hideLoading()}})},ForwardRankingDate:function(e){for(var t=0;t<e.length-1;t++)for(var n=0;n<e.length-1-t;n++)if(Date.parse(this.turnDate(e[n].setTime2))>Date.parse(this.turnDate(e[n+1].setTime2))){var a=e[n];e[n]=e[n+1],e[n+1]=a}return e},viewClick:function(e,t){this.selectIndex=e,this.date=t.longDate,this.getDeparture()},getScheduleNum:function(e){if("定制巴士"!=e.shuttleType){var t=e.executeScheduleID.split("|");return t[1]}},turnDate:function(e){var t=e.replace("T"," "),n=t.substr(0,16);return n},isFlowTickets:function(e){if("定制巴士"!=e.shuttleType)return-1!=e.priceID.lastIndexOf("前")?"流水":"普通"},onShowDatePicker:function(e){this.type=e,this.showPicker=!0,this.value=this[e]},onSelected:function(e){if(this.showPicker=!1,e){this[this.type]=e.value,this.date=e.value,this.getTicketInfo(e.value);for(var t=!1,n=0;n<this.dateArray.length;n++)new Date(this.dateArray[n].longDate).getTime()==new Date(this.date).getTime()&&(t=!0,this.selectIndex=n);if(!t){this.dateArray=[];new Date;var a=new Date(this.date);this.selectIndex=0;for(n=0;n<8;n++){var i=new Date(a.getTime()+24*n*60*60*1e3),o=this.getTime(3,i),s=this.getTime(2,i),r=this.getTime(0,i);this.dateArray.push({week:s,date:o,longDate:r})}}}},endores:function(t){var n=this;e.showLoading(),e.request({url:a.default.KyInterface.Ky_endorse.Url,method:a.default.KyInterface.Ky_endorse.method,header:a.default.KyInterface.Ky_endorse.header,data:{orderNumber:n.endoresOrderNum,CompanyCode:n.endorescompanyCode,executeDate:t.setTime,sheduleCompanyCode:t.scheduleCompanyCode,executeScheduleID:t.executeScheduleID,startSiteID:t.startSiteID,endSiteID:t.endSiteID},success:function(t){e.hideLoading(),console.log(t),t.data&&(1==t.data.status?e.showToast({title:t.data.msg}):0==t.data.status&&e.showToast({title:t.data.msg,icon:"none"}))},fail:function(e){console.log(e)}})},ticketDetail:function(t){var n=this;if("true"==n.isEndores){var a=n.startStation+"-"+n.endStation+"-"+n.endoresDate;e.showModal({content:"是否改签到当前班次"+a,success:function(e){e.confirm&&n.endores(t)}})}else if("定制巴士"!=t.shuttleType)-1!=t.priceID.lastIndexOf("前")?e.showModal({title:"温馨提示",content:"流水班车发车时间间隔短、班次多，旅客购买后可乘坐当天任意流水班车出行。",success:function(e){e.confirm&&n.goNext(t)}}):n.goNext(t);else{var i={SetoutTime:t.setTime,StartSiteName:t.startStaion,EndSiteName:t.endStation,remainingVotes:t.remainingVotes,LineViaSiteName:t.LineViaSiteName,ScheduleID:t.ScheduleID};e.setStorage({key:"specialTicketDate",data:i,success:function(){e.navigateTo({url:"../../SpecialBus/ScheduleLineList/specialBusTakeOrder"})},fail:function(){console.log("123")}})}},goNext:function(t){e.setStorage({key:"ticketDate",data:t,success:function(){e.navigateTo({url:"./scheduleDetails"})},fail:function(){console.log("123")}})},getTime:function(e,t){var n,a,i,o,s=new Date(t.getTime()),r="/",c=s.getFullYear(),u=s.getMonth()+1,d=s.getDay(),l=s.getDate(),f=s.getHours()<10?"0"+s.getHours():s.getHours(),h=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes(),g=s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds();return n=c+r+u+r+l,a=f+":"+h+":"+g,i=u+"/"+l,o=u+"月"+l+"日",0==e?n:1==e?a:2!=e?3==e?i:4==e?o:n+" "+a:1==d?"周一":2==d?"周二":3==d?"周三":4==d?"周四":5==d?"周五":6==d?"周六":0==d?"周日":void 0},loadDate:function(e){var t=this,n="";if("date"==e.date)n=new Date,t.getTicketInfo(n),console.log("二维码");else if("date"==e)n=new Date,t.getTicketInfo(n);else{var a=new RegExp("-","ig"),i=this.date.replace(a,"/");n=new Date(i)}this.selectIndex=0;for(var o=0;o<7;o++){var s=new Date(n.getTime()+24*o*60*60*1e3),r=this.getTime(3,s),c=this.getTime(2,s),u=this.getTime(0,s);this.dateArray.push({week:c,date:r,longDate:u})}},getDeparture:function(){this.getTicketInfo(this.date)},turnValue:function(e){if(e){var t=e.replace(/,/g,"、");return t}}}};t.default=r}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},496:
/*!**************************************************************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue?vue&type=style&index=0&lang=scss& ***!
  \**************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){"use strict";n.r(t);var a=n(/*! -!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectTickets.vue?vue&type=style&index=0&lang=scss& */497),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},497:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue?vue&type=style&index=0&lang=scss& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){}},[[490,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../../.sourcemap/mp-weixin/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.js.map