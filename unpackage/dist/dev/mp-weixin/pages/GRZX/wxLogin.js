(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/GRZX/wxLogin"],{247:
/*!*******************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/main.js?{"page":"pages%2FGRZX%2FwxLogin"} ***!
  \*******************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";(function(e){t(/*! uni-pages */4);o(t(/*! vue */2));var n=o(t(/*! ./pages/GRZX/wxLogin.vue */248));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},248:
/*!************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxLogin.vue ***!
  \************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o=t(/*! ./wxLogin.vue?vue&type=template&id=188a725b& */249),a=t(/*! ./wxLogin.vue?vue&type=script&lang=js& */251);for(var r in a)"default"!==r&&function(e){t.d(n,e,(function(){return a[e]}))}(r);t(/*! ./wxLogin.vue?vue&type=style&index=0&lang=scss& */253);var i,u=t(/*! ../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),c=Object(u["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],i);c.options.__file="pages/GRZX/wxLogin.vue",n["default"]=c.exports},249:
/*!*******************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxLogin.vue?vue&type=template&id=188a725b& ***!
  \*******************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=template&id=188a725b& */250);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},250:
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxLogin.vue?vue&type=template&id=188a725b& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return a})),t.d(n,"staticRenderFns",(function(){return i})),t.d(n,"recyclableRender",(function(){return r})),t.d(n,"components",(function(){return o}));var a=function(){var e=this,n=e.$createElement;e._self._c},r=!1,i=[];a._withStripped=!0},251:
/*!*************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxLogin.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=script&lang=js& */252),a=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=a.a},252:
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxLogin.vue?vue&type=script&lang=js& ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;t(/*! @/components/GRZX/js_sdk/gsq-image-tools/image-tools/index.js */236);var o={data:function(){return{textCode:"获取验证码",phoneNumber:"",captchaCode:"",bindPhoneImg:"",type:"",urlData:""}},onLoad:function(n){this.loadImg(),e.showToast({title:"首次授权需要绑定手机号",icon:"none"}),this.type=n.type,this.urlData=n.urlData},methods:{loadImg:function(){var e=this;e.$ChangeImage.GetImage("南平综合出行","绑定手机号").then((function(n){e.bindPhoneImg=n}))},judgeNum:function(e){var n=/^\d+(\.\d+)?$/,t=/^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$/;return!(!n.test(e)&&!t.test(e))},inputChange1:function(n){var t=n.detail.value;this.judgeNum(t)||e.showToast({title:"请输入正确的手机号码",icon:"none"});var o=n.currentTarget.dataset.key;this[o]=n.detail.value},inputChange2:function(n){var t=n.detail.value;this.judgeNum(t)||e.showToast({title:"请输入正确的验证码",icon:"none"});var o=n.currentTarget.dataset.key;this[o]=n.detail.value},bindPhone:function(){this.appbindPhone()},H5bindPhone:function(){var n=e.getStorageSync("captchaCode"),t=e.getStorageSync("wxuserInfo"),o=this.phoneNumber,a=this.captchaCode;null==o||""==o?e.showToast({title:"请输入手机号码",icon:"none"}):null==a||""==a?e.showToast({title:"请输入验证码",icon:"none"}):null==n||""==n?e.showToast({title:"验证码已过期，请重新获取",icon:"none"}):o==n.phone&&a==n.code?this.login("H5",t,o):e.showToast({title:"验证码输入错误，请重新输入",icon:"none"})},appbindPhone:function(){var n=this,t=e.getStorageSync("captchaCode"),o=e.getStorageSync("appUserInfo"),a=n.phoneNumber,r=n.captchaCode;null==a||""==a?e.showToast({title:"请输入手机号码",icon:"none"}):null==r||""==r?e.showToast({title:"请输入验证码",icon:"none"}):null==t||""==t?e.showToast({title:"验证码已过期，请重新获取",icon:"none"}):a==t.phone&&r==t.code?n.login(n.type,o,a):e.showToast({title:"验证码输入错误，请重新输入",icon:"none"})},login:function(n,t,o){var a=this;e.showLoading({mask:!0,title:"正在绑定中..."}),e.request({url:a.$GrzxInter.Interface.login.value,data:{phoneNumber:o,systemname:a.$GrzxInter.systemConfig.appName,openidtype:a.$GrzxInter.systemConfig.openidtype},method:a.$GrzxInter.Interface.login.method,success:function(e){var r=e.data.data,i=new Object;if("appWxLogin"==n)i={userId:r.UserId,phoneNumber:o,nickname:t.nickName,address:t.province+t.city,gender:t.gender,openId:t.openId,birthday:r.Birthday,autograph:r.Autograph,portrait:t.avatarUrl};else if("appQQLogin"==n){var u=0;"男"==t.gender?u=1:"女"==t.gender&&(u=2),i={userId:r.UserId,phoneNumber:o,nickname:t.nickName,address:t.province+t.city,gender:u,openId:t.openId,birthday:r.Birthday,autograph:r.Autograph,portrait:t.figureurl_2}}else"H5"==n&&(i={userId:r.UserId,phoneNumber:o,nickname:t.nickname,address:t.province+t.city,openId:t.openid,gender:r.Gender,birthday:r.Birthday,autograph:r.Autograph,portrait:t.headimgurl});a.changeInfo(i)},fail:function(n){e.hideLoading()}})},changeInfo:function(n){var t=this;e.request({url:t.$GrzxInter.Interface.changeInfo.value,data:{userId:n.userId,phoneNumber:n.phoneNumber,nickname:n.nickname,address:n.address,gender:n.gender,openId:n.openId,birthday:n.birthday,autograph:n.autograph,systemname:t.$GrzxInter.systemConfig.appName,openidtype:t.$GrzxInter.systemConfig.openidtype},method:t.$GrzxInter.Interface.changeInfo.method,success:function(o){console.log(o,"res"),e.request({url:t.$GrzxInter.Interface.changeInfoPortrait.value,data:{userId:n.userId,portrait:n.portrait},method:t.$GrzxInter.Interface.changeInfoPortrait.method,success:function(n){if(console.log(n),n.data.status){var a=o.data.data;e.setStorageSync("userInfo",a),e.hideLoading(),e.showToast({title:"绑定成功！",icon:"success"}),e.removeStorageSync("captchaCode"),e.removeStorageSync("appUserInfo"),e.removeStorageSync("wxuserInfo"),setTimeout((function(){t.returnPage()}),500)}else e.showToast({title:n.data.msg,icon:"none"})},fail:function(n){e.hideLoading()}})},fail:function(n){e.hideLoading()}})},returnPage:function(){var n=this;2==n.urlData?n.$GrzxInter.navToOrderList():1==n.urlData?n.$GrzxInter.navToHome():e.navigateBack({delta:2})},getCodeClick:function(n){var t=this;this.phoneNumber,this.captchaCode;if(t.judgeNum(t.phoneNumber)){var o=null,a=59;"获取验证码"==t.textCode&&(t.textCode=a+"秒后重发","59秒后重发"==t.textCode&&(o=setInterval((function(){a--,a<=0?(t.textCode="获取验证码",clearInterval(o),a=59):t.textCode=a+"秒后重发"}),1e3),e.request({url:t.$GrzxInter.Interface.getLoginCode.value,data:{phoneNumber:t.phoneNumber},method:t.$GrzxInter.Interface.getLoginCode.method,success:function(n){console.log(n.data.data,"158");var o={phone:t.phoneNumber,code:n.data.data};e.setStorageSync("captchaCode",o),e.showToast({title:"验证码已发送，仅在5分钟内有效!",icon:"none"}),setTimeout((function(){e.removeStorage({key:"captchaCode"}),console.log("删除成功！")}),3e5)}})))}else e.showToast({title:"请输入正确的手机号码",icon:"none"})}}};n.default=o}).call(this,t(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},253:
/*!**********************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxLogin.vue?vue&type=style&index=0&lang=scss& ***!
  \**********************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=style&index=0&lang=scss& */254),a=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=a.a},254:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxLogin.vue?vue&type=style&index=0&lang=scss& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,t){}},[[247,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/GRZX/wxLogin.js.map