(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/GRZX/addPassenger"],{263:
/*!************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/main.js?{"page":"pages%2FGRZX%2FaddPassenger"} ***!
  \************************************************************************************/
/*! no static exports found */function(e,t,s){"use strict";(function(e){s(/*! uni-pages */4);a(s(/*! vue */2));var t=a(s(/*! ./pages/GRZX/addPassenger.vue */264));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,s(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},264:
/*!*****************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages/GRZX/addPassenger.vue ***!
  \*****************************************************************/
/*! no static exports found */function(e,t,s){"use strict";s.r(t);var a=s(/*! ./addPassenger.vue?vue&type=template&id=4b4b8594& */265),u=s(/*! ./addPassenger.vue?vue&type=script&lang=js& */267);for(var r in u)"default"!==r&&function(e){s.d(t,e,(function(){return u[e]}))}(r);s(/*! ./addPassenger.vue?vue&type=style&index=0&lang=scss& */269);var n,o=s(/*! ../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),c=Object(o["default"])(u["default"],a["render"],a["staticRenderFns"],!1,null,null,null,!1,a["components"],n);c.options.__file="pages/GRZX/addPassenger.vue",t["default"]=c.exports},265:
/*!************************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages/GRZX/addPassenger.vue?vue&type=template&id=4b4b8594& ***!
  \************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,s){"use strict";s.r(t);var a=s(/*! -!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addPassenger.vue?vue&type=template&id=4b4b8594& */266);s.d(t,"render",(function(){return a["render"]})),s.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]})),s.d(t,"recyclableRender",(function(){return a["recyclableRender"]})),s.d(t,"components",(function(){return a["components"]}))},266:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages/GRZX/addPassenger.vue?vue&type=template&id=4b4b8594& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,s){"use strict";var a;s.r(t),s.d(t,"render",(function(){return u})),s.d(t,"staticRenderFns",(function(){return n})),s.d(t,"recyclableRender",(function(){return r})),s.d(t,"components",(function(){return a}));var u=function(){var e=this,t=e.$createElement;e._self._c},r=!1,n=[];u._withStripped=!0},267:
/*!******************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages/GRZX/addPassenger.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************/
/*! no static exports found */function(e,t,s){"use strict";s.r(t);var a=s(/*! -!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addPassenger.vue?vue&type=script&lang=js& */268),u=s.n(a);for(var r in a)"default"!==r&&function(e){s.d(t,e,(function(){return a[e]}))}(r);t["default"]=u.a},268:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages/GRZX/addPassenger.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={data:function(){return{sexMode:[{title:"男"},{title:"女"}],proveType:["请选择","军人","教师","学生"],selectTypeState:!1,selectType:["请选择","成人","半票儿童"],selectCode:["请选择","身份证","护照","港澳通行证","台胞证"],codeType:"身份证 >",ticketType:"成人 >",selector:"请选择特殊凭证 >",user:{passengerId:"",userName:"",userSex:0,userPhoneNum:"",userCodeNum:"",userDefault:!1,show:!0,prove:0,type:1},userType:"",address:"",userId:"",code:1,noticeText:"",whetherCheck:!0}},onLoad:function(e){this.selectTypeState&&this.selectType.push("免票儿童"),this.loadUnid();var t=e.type;this.type=e.type,"edit"==e.type&&this.loadData(t),this.loadText()},onUnload:function(){e.removeStorageSync("editPassenger")},methods:{loadUnid:function(){var t=this;e.getStorage({key:"userInfo",success:function(e){t.userId=e.data.userId},fail:function(){e.showToast({icon:"none",title:"暂未登录,请登录后查看"}),e.stopPullDownRefresh(),setTimeout((function(){e.navigateTo({url:"/pages/GRZX/wxAuthorize"})}),1500)}})},loadData:function(t){e.showLoading({title:"加载中..."});var s=this;e.getStorage({key:"editPassenger",success:function(t){console.log(t,"res"),s.user.passengerId=t.data.passengerId,s.user.userName=t.data.userName,"男"==t.data.userSex?s.user.userSex=0:s.user.userSex=1,s.user.userCodeNum=t.data.userCodeNum,s.user.userDefault=t.data.userDefault,s.user.userPhoneNum=t.data.userPhoneNum,"军人"==t.data.userType||"教师"==t.data.userType||"学生"==t.data.userType?(s.selector=t.data.userType+" >","军人"==t.data.userType?s.user.prove=1:"教师"==t.data.userType?s.user.prove=2:"学生"==t.data.userType&&(s.user.prove=3),s.ticketType="成人 >",s.user.type=1):s.ticketType=t.data.userType+" >","成人 >"==s.ticketType?s.user.type=1:"半票儿童 >"==s.ticketType?s.user.type=2:"免票儿童 >"==s.ticketType&&(s.user.type=3),""==t.data.userauditState?(s.user.codeType="请选择证件类型 >",s.code=0):(s.codeType=t.data.userauditState+" >","身份证"==t.data.userauditState?s.code=1:"护照"==t.data.userauditState?s.code=2:"港澳通行证"==t.data.userauditState?s.code=3:"台胞证"==t.data.userauditState?s.code=4:"回乡证"==t.data.userauditState&&(s.code=5)),e.hideLoading()}})},loadText:function(){var t=this;e.request({url:this.$GrzxInter.Interface.GetAggrement.value,method:this.$GrzxInter.Interface.GetAggrement.method,success:function(e){if(console.log(e,"乘车人须知"),e.data.status)for(var s=0;s<e.data.data.length;s++)"购票须知"==e.data.data[s].Title&&(t.noticeText=e.data.data[s].Body)}})},radioClick:function(e){this.user.userSex=e},formSubmit:function(t){var s=t.target.value,a=this;s.passengerId=a.user.passengerId,null==s.userDefault||""==s.userDefault?s.userDefault=!1:s.userDefault=!0,s.userauditState=a.codeType,"请选择特殊凭证 >"!=a.selector?s.userType=a.selector:s.userType=a.ticketType;var u="";console.log(s.userType,"购票类型"),u="免票儿童 >"!=s.userType&&"半票儿童 >"!=s.userType&&a.whetherCheck,console.log(u,"是否开启验证");var r=/^1(3|4|5|6|7|8|9)\d{9}$/;""==s.userName||null==s.userName?e.showToast({title:"请输入姓名",icon:"none"}):s.userName.length<2?e.showToast({title:"输入的姓名不能少于2位",icon:"none"}):""==s.userPhoneNum||null==s.userPhoneNum?e.showToast({title:"请输入手机号码",icon:"none"}):11==s.userPhoneNum.length&&r.test(s.userPhoneNum)?"请选择证件类型 >"==s.userauditState?e.showToast({title:"请选择证件类型",icon:"none"}):""==s.userCodeNum||null==s.userCodeNum?e.showToast({title:"请输入证件号",icon:"none"}):"身份证 >"==s.userauditState&&!a.checkIDCard(s.userCodeNum)&&u?e.showToast({title:"输入的身份证号有误，请检查",icon:"none"}):"护照 >"==s.userauditState&&!a.checkPass1(s.userCodeNum)&&u||"港澳通行证 >"==s.userauditState&&!a.checkPass2(s.userCodeNum)&&u||"台胞证 >"==s.userauditState&&!a.checkPass3(s.userCodeNum)&&u?e.showToast({title:"输入的证件号有误，请检查",icon:"none"}):"请选择购票类型 >"==s.userType?e.showToast({title:"请选择购票类型",icon:"none"}):"免票儿童 >"!=s.userType&&"半票儿童 >"!=s.userType||1!=s.userDefault?(s.userType=s.userType.substring(0,s.userType.length-2),s.userauditState=s.userauditState.substring(0,s.userauditState.length-2),e.showLoading({title:"保存中..."}),a.checkSelf(s)):e.showToast({title:"儿童不允许设置为本人",icon:"none"}):e.showToast({icon:"none",title:"输入的手机号有误，请检查"})},checkSelf:function(t){var s=this;e.request({url:s.$GrzxInter.Interface.userInfoList.value,data:{userId:s.userId},method:s.$GrzxInter.Interface.userInfoList.method,success:function(a){if(t.userDefault&&null!=a.data.data&&""!=a.data.data){var u=a.data.data.filter((function(e){return 1==e.userDefault}));u.length>0?e.request({url:s.$GrzxInter.Interface.changeUserInfo.value,data:{userId:s.userId,passengerId:u[0].passengerId,userType:u[0].userType,userName:u[0].userName,userSex:u[0].userSex,userCodeNum:u[0].userCodeNum,userPhoneNum:u[0].userPhoneNum,userDefault:"false",userEmergencyContact:"false",userfrontImg:u[0].fImg,userbackImg:u[0].bImg,userauditState:u[0].userauditState},method:s.$GrzxInter.Interface.changeUserInfo.method,success:function(e){console.log(e,"315"),s.keepPassenger(t)}}):s.keepPassenger(t)}else s.keepPassenger(t)}})},keepPassenger:function(t){var s=this;e.request({url:s.$GrzxInter.Interface.changeUserInfo.value,data:{userId:s.userId,passengerId:t.passengerId,userType:t.userType,userName:t.userName,userSex:t.userSex,userCodeNum:t.userCodeNum,userPhoneNum:t.userPhoneNum,userDefault:t.userDefault,userEmergencyContact:"false",userfrontImg:t.fImg,userbackImg:t.bImg,userauditState:t.userauditState},method:s.$GrzxInter.Interface.changeUserInfo.method,success:function(t){console.log(t,"370"),e.showToast({icon:"none",title:t.data.msg}),t.data.status&&("add"==s.type&&e.getStorage({key:"passengerList",success:function(s){console.log(s,"378");for(var a=[],u=0;u<s.data.length;u++)a.push(s.data[u]);0==t.data.data.userSex?t.data.data.userSex="男":t.data.data.userSex="女";var r={passengerId:t.data.data.PassengerId,userType:t.data.data.UserType,userName:t.data.data.UserName,userSex:t.data.data.UserSex,userCodeNum:t.data.data.UserCodeNum,userPhoneNum:t.data.data.UserPhoneNum,userDefault:t.data.data.IsuserDefault,userEmergencyContact:t.data.data.IsuserEmergencyContact,hiddenIndex:1};a.push(r),e.setStorage({key:"passengerList",data:a})}}),setTimeout((function(){e.navigateBack()}),500))}})},bindDateChange:function(e){this.user.date=e.target.value},codeChange:function(e){this.code=e.detail.value,this.user.userCodeNum="",0==e.detail.value?this.codeType="请选择证件类型 >":this.codeType=this.selectCode[e.detail.value]+" >"},proveChange:function(e){this.user.prove=e.detail.value,0==e.detail.value?this.selector="请选择特殊凭证 >":this.selector=this.proveType[e.detail.value]+" >"},typeChange:function(e){this.user.type=e.detail.value,console.log(e),0==e.detail.value?this.ticketType="请选择购票类型 >":this.ticketType=this.selectType[e.detail.value]+" >"},resetClick:function(e){console.log(e),this.user.userSex=0,this.user.show=!0,this.user.userName="",this.user.userPhoneNum="",this.user.userCodeNum="",this.codeType="请选择证件类型 >",this.ticketType="请选择购票类型 >",this.selector="请选择特殊凭证 >",this.user.userDefault=!1,this.code=0,this.user.prove=0,this.user.type=0},checkChange:function(e){"false"==e.detail.value||"true"==e.detail.value?this.user.show=!1:(this.user.show=!0,this.user.userEmergencyContact=!1)},returnClick:function(){e.navigateBack()},checkPhone:function(t){var s=/^1(3|4|5|6|7|8|9)\d{9}$/;""==t.detail.value?console.log("空的"):s.test(t.detail.value)?console.log("正确"):e.showToast({title:"输入的手机号有误，请检查",icon:"none"})},checkCodeNum1:function(e){console.log(e),""==e.detail.value?console.log("空的"):this.checkIDCard(e.detail.value)&&console.log("正确")},checkCodeNum2:function(e){""==e.detail.value?console.log("空的"):this.checkPass1(e.detail.value)&&console.log("正确")},checkCodeNum3:function(e){""==e.detail.value?console.log("空的"):this.checkPass2(e.detail.value)&&console.log("正确")},checkCodeNum4:function(e){""==e.detail.value?console.log("空的"):this.checkPass3(e.detail.value)&&console.log("正确")},checkCodeNum5:function(t){""==t.detail.value?console.log("空的"):this.checkPass4(t.detail.value)?console.log("正确"):e.showToast({title:"输入的证件号有误，请检查",icon:"none"})},checkIDCard:function(e){for(var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],s=["1","0","X","9","8","7","6","5","4","3","2"],a=e+"",u=e[17],r=a.substring(0,17),n=r.split(""),o=n.length,c=0,d=0;d<o;d++)c+=n[d]*t[d];var i=c%11,l=s[i],h=/^[1-9][0-9]{5}([1][9][0-9]{2}|[2][0][0|1][0-9])([0][1-9]|[1][0|1|2])([0][1-9]|[1|2][0-9]|[3][0|1])[0-9]{3}([0-9]|[X])$/,f=h.test(e);return!(u!==l||!f)},checkPass1:function(e){var t=/^((1[45]\d{7})|(G\d{8})|(P\d{7})|(S\d{7,8}))?$/.test(e);return t},checkPass2:function(e){var t=/^[HMhm]{1}([0-9]{10}|[0-9]{8})$/.test(e);return t},checkPass3:function(e){var t=/^(?:(830000(?:19|20)\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])\d{3}[\dX])|\d{10}[DAB])$/.test(e);return t},checkPass4:function(e){return!0},nameClick:function(t){""==t.detail.value?console.log("空的"):t.detail.value.length>=2?console.log("正确"):e.showToast({title:"输入的姓名不能少于2位",icon:"none"})}}};t.default=s}).call(this,s(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},269:
/*!***************************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages/GRZX/addPassenger.vue?vue&type=style&index=0&lang=scss& ***!
  \***************************************************************************************************/
/*! no static exports found */function(e,t,s){"use strict";s.r(t);var a=s(/*! -!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./addPassenger.vue?vue&type=style&index=0&lang=scss& */270),u=s.n(a);for(var r in a)"default"!==r&&function(e){s.d(t,e,(function(){return a[e]}))}(r);t["default"]=u.a},270:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages/GRZX/addPassenger.vue?vue&type=style&index=0&lang=scss& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,s){}},[[263,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/GRZX/addPassenger.js.map