(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/GRZX/wxAuthorize"],{228:
/*!**************************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxAuthorize.vue?vue&type=style&index=0&lang=scss& ***!
  \**************************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src??ref--8-oneOf-1-3!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxAuthorize.vue?vue&type=style&index=0&lang=scss& */229),a=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=a.a},229:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-2!./node_modules/postcss-loader/src??ref--8-oneOf-1-3!./node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--8-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxAuthorize.vue?vue&type=style&index=0&lang=scss& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,t){},64:
/*!***********************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/main.js?{"page":"pages%2FGRZX%2FwxAuthorize"} ***!
  \***********************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";(function(e){t(/*! uni-pages */4);o(t(/*! vue */2));var n=o(t(/*! ./pages/GRZX/wxAuthorize.vue */65));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},65:
/*!****************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxAuthorize.vue ***!
  \****************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o=t(/*! ./wxAuthorize.vue?vue&type=template&id=1de24ddb& */66),a=t(/*! ./wxAuthorize.vue?vue&type=script&lang=js& */68);for(var r in a)"default"!==r&&function(e){t.d(n,e,(function(){return a[e]}))}(r);t(/*! ./wxAuthorize.vue?vue&type=style&index=0&lang=scss& */228);var s,i=t(/*! ../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),c=Object(i["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],s);c.options.__file="pages/GRZX/wxAuthorize.vue",n["default"]=c.exports},66:
/*!***********************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxAuthorize.vue?vue&type=template&id=1de24ddb& ***!
  \***********************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxAuthorize.vue?vue&type=template&id=1de24ddb& */67);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},67:
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxAuthorize.vue?vue&type=template&id=1de24ddb& ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return a})),t.d(n,"staticRenderFns",(function(){return s})),t.d(n,"recyclableRender",(function(){return r})),t.d(n,"components",(function(){return o}));var a=function(){var e=this,n=e.$createElement;e._self._c},r=!1,s=[];a._withStripped=!0},68:
/*!*****************************************************************************************!*\
  !*** D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxAuthorize.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxAuthorize.vue?vue&type=script&lang=js& */69),a=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=a.a},69:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/UAD/NP_ComprehensiveTravel/pages/GRZX/wxAuthorize.vue?vue&type=script&lang=js& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={data:function(){return{SessionKey:"",OpenId:"",nickName:null,avatarUrl:null,bindState:!1,sessionKey:"",openId_xcx:"",userInfo:[],type:""}},onLoad:function(n){this.type=n.type;var t=e.getStorageSync("isCanUse");t&&this.wxGetUserInfo()},methods:{wxGetUserInfo:function(){e.showLoading({title:"登录中..."});var n=this;e.getUserInfo({provider:"weixin",success:function(t){console.log(t,"49"),n.userInfo=t.userInfo,e.setStorageSync("isCanUse",!0),e.login({success:function(e){console.log(e,"res2"),n.getOpenID(e.code)}})},fail:function(n){e.showToast({title:"登录授权失败",icon:"none"})}})},getOpenID:function(n){var t=this;console.log("访问地址",t.$GrzxInter.Interface.GetUserInfoByOpenId.value),console.log("应用名称",t.$GrzxInter.systemConfig.appName),console.log("应用类型",t.$GrzxInter.systemConfig.openidtype),e.request({url:t.$GrzxInter.Interface.GetOpenId_xcx.value,method:t.$GrzxInter.Interface.GetOpenId_xcx.method,data:{code:n,systemname:t.$GrzxInter.systemConfig.appName,openidtype:t.$GrzxInter.systemConfig.openidtype},success:function(n){if(console.log(n,"logRes"),n.data.status){e.setStorageSync("scenicSpotOpenId",n.data.data.openid);var o=n.data.data.openid;t.sessionKey=n.data.data.session_key,t.openId_xcx=n.data.data.openid,e.request({url:t.$GrzxInter.Interface.GetUserInfoByOpenId.value,data:{openid:o,systemname:t.$GrzxInter.systemConfig.appName,openidtype:t.$GrzxInter.systemConfig.openidtype},method:t.$GrzxInter.Interface.GetUserInfoByOpenId.method,success:function(n){if(setTimeout((function(){e.hideLoading()}),1e3),console.log(n,"提示什么？"),n.data.status&&""!=n.data.data.PhoneNumber&&null!=n.data.data.PhoneNumber){var o=n.data.data,a=new Object;a={address:o.Address,autograph:o.Autograph,birthday:o.Birthday,gender:o.Gender,openId_app:o.OpenId_app,openId_ios:o.OpenId_ios,openId_qq:o.OpenId_qq,openId_wx:o.OpenId_wx,openId_xcx:o.OpenId_xcx,phoneNumber:o.PhoneNumber,portrait:o.Portrait,userId:o.UserId,nickname:o.Nickname},e.setStorageSync("userInfo",a),e.showToast({title:"登录成功！",icon:"success"}),setTimeout((function(){e.navigateBack()}),500)}else"index"==t.type?(e.showToast({title:"授权成功！",icon:"success"}),e.navigateBack()):t.bindState=!0}})}else e.showToast({title:n.data.msg,icon:"none"})},fail:function(e){console.log("请求错误",e)}})},getPhoneNumber:function(n){var o=this;e.request({url:this.$GrzxInter.Interface.Get_AppSetting.value+"?systemname="+this.$GrzxInter.systemConfig.appName,method:this.$GrzxInter.Interface.Get_AppSetting.method,success:function(e){if(e.data.status){var a=t(/*! @/common/WXBizDataCrypt */70),r=n.detail.encryptedData,s=n.detail.iv,i=new a(e.data.data.Appid,o.sessionKey),c=i.decryptData(r,s);console.log("获取微信手机号",c.purePhoneNumber),o.bindPhoneNumber(c.purePhoneNumber)}},fail:function(){e.showToast({title:"获取appid失败",icon:"none"})}})},bindPhoneNumber:function(n){var t=this;e.request({url:t.$GrzxInter.Interface.login.value,data:{phoneNumber:n,systemname:t.$GrzxInter.systemConfig.appName,openidtype:t.$GrzxInter.systemConfig.openidtype},method:t.$GrzxInter.Interface.login.method,success:function(o){console.log("res1",o),o.data.status?(console.log("访问地址",t.$GrzxInter.Interface.changeInfo.value),console.log("电话",o.data.data.userId),console.log("应用名称",t.$GrzxInter.systemConfig.appName),console.log("应用类型",t.$GrzxInter.systemConfig.openidtype),e.request({url:t.$GrzxInter.Interface.changeInfo.value,data:{userId:o.data.data.UserId,phoneNumber:n,nickname:t.userInfo.nickName,address:t.userInfo.province+t.userInfo.city,openId_wx:o.data.data.OpenId_wx,gender:t.userInfo.gender,openId:t.openId_xcx,birthday:o.data.data.Birthday,autograph:o.data.data.Autograph,systemname:t.$GrzxInter.systemConfig.appName,openidtype:t.$GrzxInter.systemConfig.openidtype},method:t.$GrzxInter.Interface.changeInfo.method,success:function(n){console.log("修改用户信息",n),e.request({url:t.$GrzxInter.Interface.changeInfoPortrait.value,data:{userId:o.data.data.UserId,portrait:t.userInfo.avatarUrl},method:t.$GrzxInter.Interface.changeInfoPortrait.method,success:function(n){if(console.log("修改头像",n),n.data.status){e.showToast({title:"绑定成功！",icon:"success"});var t=n.data.data;e.setStorageSync("userInfo",t),setTimeout((function(){e.navigateBack()}),500)}}})}})):e.showToast({title:"绑定手机号失败，请重试！",icon:"none"})},fail:function(){e.showToast({title:"获取手机号失败！",icon:"none"})}})},returnClick:function(){this.$GrzxInter.navToHome()}}};n.default=o}).call(this,t(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])}},[[64,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/GRZX/wxAuthorize.js.map