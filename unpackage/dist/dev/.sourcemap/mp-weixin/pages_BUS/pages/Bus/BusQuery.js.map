{"version":3,"sources":["uni-app:///main.js","webpack:///D:/UAD/NP_ComprehensiveTravel/pages_BUS/pages/Bus/BusQuery.vue?8cb0","webpack:///D:/UAD/NP_ComprehensiveTravel/pages_BUS/pages/Bus/BusQuery.vue?23f9","webpack:///D:/UAD/NP_ComprehensiveTravel/pages_BUS/pages/Bus/BusQuery.vue?d6fb","webpack:///D:/UAD/NP_ComprehensiveTravel/pages_BUS/pages/Bus/BusQuery.vue?62aa","uni-app:///pages_BUS/pages/Bus/BusQuery.vue","webpack:///D:/UAD/NP_ComprehensiveTravel/pages_BUS/pages/Bus/BusQuery.vue?97a0"],"names":["createPage","Page","renderjs","component","options","__file","components","uCellGroup","uCellItem","uIcon","render","_vm","this","_h","$createElement","a0","_self","_c","fontSize","color","a1","l0","stationList","length","__map","stationItem","stationIndex","$orig","__get_orig","m0","numFilter","distance","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,qD,mDACAA,EAAWC,a;;;;2DCHX,iRACIC,EADJ,oKASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,mCACZ,aAAAF,E;;;;2GCvBf,umC;;;;2GCAA,8LAAIG,EAAa,CACfC,WAAY,WACV,OAAO,sMAITC,UAAW,WACT,OAAO,gMAITC,MAAO,WACL,OAAO,mKAKPC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACV,CACPC,SAAU,QACVC,MAAO,YAELC,EAAK,CACPF,SAAU,QACVC,MAAO,WAELE,EACFV,EAAIW,YAAYC,OAAS,EACrBZ,EAAIa,MAAMb,EAAIW,aAAa,SAASG,EAAaC,GAC/C,IAAIC,EAAQhB,EAAIiB,WAAWH,GAEvBI,EAAKlB,EAAImB,UAAiC,IAAvBL,EAAYM,UACnC,MAAO,CACLJ,MAAOA,EACPE,GAAIA,MAGR,KACNlB,EAAIqB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLrB,GAAIA,EACJK,GAAIA,EACJC,GAAIA,MAKRgB,GAAmB,EACnBC,EAAkB,GACtB5B,EAAO6B,eAAgB,G;;;;2DCtDvB,wuBAAirB,eAAG,G;;;;0IC8DprB,IADA,IACA,iC,yDAEA,CACA,KADA,WAEA,OACA,mBACA,iBACA,eACA,aACA,eACA,eACA,iBACA,gBACA,oBACA,mBACA,gBAIA,6CAGA,cACA,yBAGA,OAxBA,WAyBA,OACA,+CACA,kBACA,cACA,sBACA,QAFA,SAEA,GACA,IACA,mCACA,oCAKA,QAtCA,WAuCA,yBACA,6BAGA,SAGA,yBACA,WACA,eAEA,aAEA,WACA,oBACA,+BACA,6BAEA,0BAEA,KAXA,SAWA,GACA,gBACA,aACA,aACA,uBACA,oBAUA,gCAEA,WACA,yDACA,+DACA,MACA,uBACA,sBAGA,cAEA,QAVA,SAUA,GAEA,mBACA,4BAGA,KAhBA,SAgBA,GACA,0BAKA,wBACA,gBACA,WACA,2DACA,iEACA,MACA,cACA,cAEA,QAPA,SAOA,GAGA,GAFA,gBACA,sBACA,kBAEA,mBAEA,0BAEA,yBAEA,EADA,IACA,mBAEA,EAGA,oBACA,qCAEA,oCAMA,aACA,iBACA,eAIA,KAtCA,SAsCA,GACA,gBACA,0BAMA,oCACA,WACA,4FACA,kGACA,MACA,SACA,YACA,cACA,cAEA,QATA,SASA,GAEA,kBACA,kCACA,kCAEA,aACA,iBACA,eAIA,KArBA,SAqBA,GACA,0BAYA,sBACA,2CACA,aACA,kBACA,cAGA,cACA,sBACA,MACA,4BACA,yBAEA,SANA,WAQA,cAEA,iFAOA,yBAEA,wBAEA,8BAIA,qBACA,6BACA,iBAEA,6BAGA,gCAKA,kBACA,6BAEA,gCAGA,uBAEA,OACA,sBACA,kBACA,gBACA,8BACA,mCACA,qBAGA,cACA,6FAIA,wBACA,eACA,QAEA,0CAEA,sBAEA,kCAEA,SAEA,wCAEA,oBAEA,gCAIA,cACA,qDASA,UA1OA,SA0OA,GACA,cAEA,SAGA,+BACA,4BACA,Y;;;;2DC7VA,mhCAA49B,eAAG,G","file":"pages_BUS/pages/Bus/BusQuery.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages_BUS/pages/Bus/BusQuery.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./BusQuery.vue?vue&type=template&id=4a15fcfa&\"\nvar renderjs\nimport script from \"./BusQuery.vue?vue&type=script&lang=js&\"\nexport * from \"./BusQuery.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BusQuery.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages_BUS/pages/Bus/BusQuery.vue\"\nexport default component.exports","export * from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./BusQuery.vue?vue&type=template&id=4a15fcfa&\"","var components = {\n  uCellGroup: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-cell-group/u-cell-group\" */ \"@/uview-ui/components/u-cell-group/u-cell-group.vue\"\n    )\n  },\n  uCellItem: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-cell-item/u-cell-item\" */ \"@/uview-ui/components/u-cell-item/u-cell-item.vue\"\n    )\n  },\n  uIcon: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var a0 = {\n    fontSize: \"34rpx\",\n    color: \"#2D2E2E\"\n  }\n  var a1 = {\n    fontSize: \"34rpx\",\n    color: \"#2D2E2E\"\n  }\n  var l0 =\n    _vm.stationList.length > 0\n      ? _vm.__map(_vm.stationList, function(stationItem, stationIndex) {\n          var $orig = _vm.__get_orig(stationItem)\n\n          var m0 = _vm.numFilter(stationItem.distance * 100)\n          return {\n            $orig: $orig,\n            m0: m0\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        a0: a0,\n        a1: a1,\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./BusQuery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./BusQuery.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"myView\">\r\n\t\t<!-- 顶部背景图 -->\r\n\t\t<view class=\"topImage\">\r\n\t\t\t<image style=\"width: 750rpx;\" lazy-load=\"true\" src=\"../../static/Bus/busBack.png\"></image>\r\n\t\t</view>\r\n\t\t<!-- 起终点 -->\r\n\t\t<view class=\"station\">\r\n\t\t\t<u-cell-group title=\"起点\" :border=\"false\">\r\n\t\t\t\t<u-cell-item @click=\"pickStation('起点')\" :title=\"startStation\" :arrow=\"false\" :title-style=\"{'fontSize': '34rpx','color':'#2D2E2E'}\">\r\n\t\t\t\t\t<u-icon slot=\"right-icon\" size=\"40\" name=\"map\"></u-icon>\r\n\t\t\t\t</u-cell-item>\r\n\t\t\t</u-cell-group>\r\n\t\t\t\r\n\t\t\t<u-cell-group title=\"终点\" :border=\"false\">\r\n\t\t\t\t<u-cell-item @click=\"pickStation('终点')\" :title=\"endStation\" :arrow=\"false\" right-icon=\"map\" :title-style=\"{'fontSize': '34rpx','color':'#2D2E2E'}\">\r\n\t\t\t\t\t<u-icon slot=\"right-icon\" size=\"40\" name=\"reload\"></u-icon>\r\n\t\t\t\t</u-cell-item>\r\n\t\t\t</u-cell-group>\r\n\t\t\t\r\n\t\t\t<view class=\"queryButton\" @click=\"queryClick\">查询</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"around\" v-if=\"stationList.length > 0\">附近</view>\r\n\t\t\r\n\t\t<view class=\"aroundView\" v-if=\"stationList.length > 0\">\r\n\t\t\t<block v-for=\"(stationItem,stationIndex) in stationList\" :key='stationIndex'>\r\n\t\t\t\t<view class=\"aroundViewTop\" @click=\"stationClick(stationList[stationIndex])\">\r\n\t\t\t\t\t<image src=\"../../static/Bus/aroundStation.png\" class=\"aroundImage\"></image>\r\n\t\t\t\t\t<view class=\"aroundStation\">{{stationItem.stationName}}</view>\r\n\t\t\t\t\t<view class=\"distance\">距离{{numFilter(stationItem.distance * 100)}}米 > </view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view v-if=\"stationID == stationItem.stationID\">\r\n\t\t\t\t\t<block v-for=\"(item,index) in showLineList\" :key='index'>\r\n\t\t\t\t\t\t<view @click=\"routeClick(item)\" style=\"border-bottom: 1rpx solid #eeeeee;padding-bottom: 20rpx;margin-left: 77rpx;margin-right: 30rpx;\">\r\n\t\t\t\t\t\t\t<view class=\"lineView\">\r\n\t\t\t\t\t\t\t\t<view style=\"font-weight: 900;font-size: 30rpx;color: #343434;\">{{item.lineName}}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"lineText\">\r\n\t\t\t\t\t\t\t\t\t<text style=\"color: #fd6666;font-size: 28rpx;\">{{item.endName}}</text>方向\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- <view class=\"lineText\" style=\"font-weight: 900;font-size: 30rpx;color: #4282FF;\">{{item.arriveTime}}</view> -->\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"lineView\">\r\n\t\t\t\t\t\t\t\t<!-- <view class=\"lineText\">{{item.endName}}</view> -->\r\n\t\t\t\t\t\t\t\t<!-- <view class=\"lineText\">{{item.distance}}</view> -->\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<view class=\"bottomView\">\r\n\t\t\t\t\t\t<view class=\"more\" @click=\"moreClick\"  v-if=\"isMoreClick == false\">展开</view>\r\n\t\t\t\t\t\t<view class=\"more\" @click=\"packUp\"  v-if=\"isMoreClick == true\">收起</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t</block>\r\n\t\t\t\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar _self,encryption;\r\n\timport $BusInterface from '@/common/Bus.js'\r\n\t//导航栏的背景色是在pages设置\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tstartStation:'请选择',//起点\r\n\t\t\t\tendStation:'请选择',//终点\r\n\t\t\t\tstationList:[],//存放所有站点列表的数组\r\n\t\t\t\tstationID:'',//站点ID\r\n\t\t\t\tisMoreClick:false,\r\n\t\t\t\tallLineList:[],//用来存放所有线路的数组，点击展开时显示需要显示所有线路\r\n\t\t\t\tshortLineList:[],//用来存放部分线路的数组，因为有展开功能，所以只展示三条线路，点击展开时显示所有线路\r\n\t\t\t\tshowLineList:[],//遍历时用到的数组，这个数组不要去动\r\n\t\t\t\tcurrentLongitude:'',//纬度\r\n\t\t\t\tcurrentLatitude:'',//经度\r\n\t\t\t\tlineDetail:[],\r\n\t\t\t}\r\n\t\t},\r\n\t\t//--------------------------------------监听索框点击事件--------------------------------------\r\n\t\tonNavigationBarSearchInputClicked:function(){\r\n\t\t\t//注意：这里的搜索框是在pages页面设置的，只有当disabled为true的时候搜索框的点击事件才可以触发\r\n\t\t\t//点击搜索框跳转到公交查询页面\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl:\"./TransitSearch\"\r\n\t\t\t})\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t_self = this;\r\n\t\t\tencryption = $BusInterface.BusInterface.publicCode.encryption;\r\n\t\t\t_self.getMyLocation();\r\n\t\t\tuni.getStorage({\r\n\t\t\t\tkey:'queryBusStation',\r\n\t\t\t\tsuccess(data) {\r\n\t\t\t\t\tif(data){\r\n\t\t\t\t\t\t_self.startStation = data.data.startStation,\r\n\t\t\t\t\t\t_self.endStation = data.data.endStation\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tuni.setNavigationBarColor({\r\n\t\t\t\tbackgroundColor:\"#6BD78C\"\r\n\t\t\t})\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t\r\n\t\t\t//--------------------------------------获取当前位置的经纬度--------------------------------------\r\n\t\t\tgetMyLocation: function() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.getLocation({\r\n\t\t\t\t\t//type默认为wgs84返回gps坐标,gcj02返回国测局坐标,可用于uni.openLocation的坐标\r\n\t\t\t\t\ttype: \"gcj02\",\r\n\t\t\t\t\t//是否解析地址信息，默认false\r\n\t\t\t\t\tgeocode: true,\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t_self.currentLongitude = res.longitude; //--纬度\r\n\t\t\t\t\t\t_self.currentLatitude = res.latitude; //--经度\r\n\t\t\t\t\t\t//请求附近站点信息放在得到坐标之后，避免在发请求之前无坐标信息\r\n\t\t\t\t\t\t_self.getAroundStationData();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tthat.isLocation = false;\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\t\t\tcontent: '获取位置失败，请打开定位',\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n//——————————————————————————————————————网络请求开始——————————————————————————————————————\r\n\r\n\r\n\t\t\t//--------------------------------------根据坐标获取站点数据--------------------------------------\r\n\t\t\tgetAroundStationData:function(){\r\n\t\t\t\t\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:$BusInterface.BusInterface.getBusStationInfoByLonLat.Url,\r\n\t\t\t\t\tmethod:$BusInterface.BusInterface.getBusStationInfoByLonLat.method,\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tlon:_self.currentLongitude,//纬度\r\n\t\t\t\t\t\tlat:_self.currentLatitude,//纬度\r\n\t\t\t\t\t\t// lon:117.765241,\r\n\t\t\t\t\t\t// lat:24.457463,\r\n\t\t\t\t\t\tencryption: encryption,//编码\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t// console.log('请求成功',res)\r\n\t\t\t\t\t\tif(res.data.status == true){\r\n\t\t\t\t\t\t\t_self.stationList = res.data.data\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log('请求失败',res)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//--------------------------------------根据站点请求线路数据--------------------------------------\r\n\t\t\tgetLineData:function(stationName){\r\n\t\t\t\tuni.showLoading()\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:$BusInterface.BusInterface.getBusLineInfoByStationName.Url,\r\n\t\t\t\t\tmethod:$BusInterface.BusInterface.getBusLineInfoByStationName.method,\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tstationName:stationName,\r\n\t\t\t\t\t\tencryption:encryption,//编码\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tconsole.log('请求成功',res)\r\n\t\t\t\t\t\tif(res.data.status == true){\r\n\t\t\t\t\t\t\t//先清空存放部分线路的数组，避免数据叠加---存放显示部分线路的数组（当前是显示三条数据）\r\n\t\t\t\t\t\t\t_self.shortLineList = [];\r\n\t\t\t\t\t\t\t//将所有的线路数据存放在allLineList里面，点击展开的时候用到----这个数组不要去动\r\n\t\t\t\t\t\t\t_self.allLineList = res.data.data;\r\n\t\t\t\t\t\t\t//判断数组长度，如果长度小于3就显示所有数据，如果长度大于3就显示3条数据\r\n\t\t\t\t\t\t\tvar num = res.data.data.length;\r\n\t\t\t\t\t\t\tif(num < 3){\r\n\t\t\t\t\t\t\t\tnum = res.data.data.length\r\n\t\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\t\tnum = 3;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//取不多于三条线路数据展示\r\n\t\t\t\t\t\t\tfor(var i = 0; i < num; i++){\r\n\t\t\t\t\t\t\t\t_self.shortLineList.push(res.data.data[i])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_self.showLineList = _self.shortLineList\r\n\t\t\t\t\t\t\t// for(var i = 0; i < res.data.data.length; i++){\r\n\t\t\t\t\t\t\t// \t// console.log(i)\r\n\t\t\t\t\t\t\t// \t_self.getLineDetailInfo(res.data.data[i].lineID,res.data.data[i].lineDirection,stationName,res.data.data)\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle:res.data.msg,\r\n\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tconsole.log('请求失败',res)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//--------------------------------------根据站点名称获取某条线路距离某个站点即将到站车辆信息--------------------------------------\r\n\t\t\t//这个接口暂时没有用到\r\n\t\t\tgetLineDetailInfo:function(lineId,direction,stationName,lineData){\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:$BusInterface.BusInterface.getBusLineArriveLeaveStationInfoByLineIdDirectionStationName.Url,\r\n\t\t\t\t\tmethod:$BusInterface.BusInterface.getBusLineArriveLeaveStationInfoByLineIdDirectionStationName.method,\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tlineId:lineId,\r\n\t\t\t\t\t\tdirection:direction,\r\n\t\t\t\t\t\tstationName:stationName,\r\n\t\t\t\t\t\tencryption:encryption,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t// console.log('请求成功',res)\r\n\t\t\t\t\t\tif(res.data.status == true){\r\n\t\t\t\t\t\t\t_self.lineDetail.push(res.data.data[0])\r\n\t\t\t\t\t\t\tconsole.log('线路详情',_self.lineDetail)\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle:res.data.msg,\r\n\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log('请求失败',res)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n//——————————————————————————————————————网络请求结束——————————————————————————————————————\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n//**************************************事件写在这里（开始）**************************************\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//--------------------------------------查询点击事件--------------------------------------\r\n\t\t\tqueryClick:function(){\r\n\t\t\t\tif(_self.startStation == '请选择' || _self.endStation == '请选择'){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'起点或终点不能为空',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}else {\r\n\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\tkey:'queryBusStation',\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\tstartStation : _self.startStation,\r\n\t\t\t\t\t\t\tendStation : _self.endStation\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcomplete() {\r\n\t\t\t\t\t\t\t//跳转到线路规划页面\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t// url:'./BusLocation'\r\n\t\t\t\t\t\t\t\turl:'./RoutePlan?startStation=' + _self.startStation + '&endStation=' + _self.endStation\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//--------------------------------------站点点击事件--------------------------------------\r\n\t\t\tstationClick:function(item){\r\n\t\t\t\t//取出站点ID用来判断当前点击的是哪个站点，判断是否可以展开\r\n\t\t\t\t_self.stationID = item.stationID;\r\n\t\t\t\t//请求线路数据，将站点名称跟下标传过去\r\n\t\t\t\t_self.getLineData(item.stationName);\r\n\t\t\t},\r\n\t\t\t//--------------------------------------展开点击事件--------------------------------------\r\n\t\t\t//这里的展开收起功能的原理是一开始只取三组数据赋值给showLineList，点击展开的时候将所有的数据全部赋值给showLineList\r\n\t\t\tmoreClick:function(){\r\n\t\t\t\t_self.isMoreClick = !_self.isMoreClick;\r\n\t\t\t\tif(_self.isMoreClick == true){\r\n\t\t\t\t\t//显示所有线路\r\n\t\t\t\t\t_self.showLineList = _self.allLineList\r\n\t\t\t\t}else {\r\n\t\t\t\t\t//显示部分线路\r\n\t\t\t\t\t_self.showLineList = _self.shortLineList\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//--------------------------------------收起点击事件--------------------------------------\r\n\t\t\tpackUp:function(){\r\n\t\t\t\t_self.isMoreClick = !_self.isMoreClick;\r\n\t\t\t\t//显示部分线路\r\n\t\t\t\t_self.showLineList = _self.shortLineList\r\n\t\t\t},\r\n\t\t\t//--------------------------------------点击线路跳转到公交位置时间轴页面--------------------------------------\r\n\t\t\trouteClick:function(option){\r\n\t\t\t\t//数组字段统一\r\n\t\t\t\tvar item = {\r\n\t\t\t\t\tStartName           : option.startName,\r\n\t\t\t\t\tEndName             : option.endName,\r\n\t\t\t\t\tlineID              : option.lineID,\r\n\t\t\t\t\tfirstLastTime       : option.firstLastTime,\r\n\t\t\t\t\tLineRouteDirection  : option.lineDirection,\r\n\t\t\t\t\tlineName            : option.lineName,\r\n\t\t\t\t}\r\n\t\t\t\t//encodeURIComponent较长的字符串传输方式，lastPage这个字段用来给下一个页面判断是从哪个进去的\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'./BusLocation?lineRoute=' + encodeURIComponent(JSON.stringify(item)) + '&lastPage=' + 'BusQuery'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//--------------------------------------点击起点/终点--------------------------------------\r\n\t\t\tpickStation:function(option){\r\n\t\t\t\tconsole.log(option)\r\n\t\t\t\tif(option == '起点'){\r\n\t\t\t\t\t//监听事件,监听下个页面返回的值\r\n\t\t\t\t\tuni.$on('busStartStaionChange', function(data) {\r\n\t\t\t\t\t    // data即为传过来的值，给上车点赋值\r\n\t\t\t\t\t\t_self.startStation = data.data;\r\n\t\t\t\t\t    //清除监听，不清除会消耗资源\r\n\t\t\t\t\t    uni.$off('busStartStaionChange');\r\n\t\t\t\t\t});\r\n\t\t\t\t}else if(option == '终点'){\r\n\t\t\t\t\t//监听事件,监听下个页面返回的值\r\n\t\t\t\t\tuni.$on('busEndStaionChange', function(data) {\r\n\t\t\t\t\t    // data即为传过来的值，给上车点赋值\r\n\t\t\t\t\t\t_self.endStation = data.data;\r\n\t\t\t\t\t    //清除监听，不清除会消耗资源\r\n\t\t\t\t\t    uni.$off('busEndStaionChange');\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'./TransitSearch?type=' + option + '&current=' + 'BusQuery',\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n//**************************************事件写在这里（结束）**************************************\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//---------------------------------------其他方法---------------------------------------\r\n\t\t\tnumFilter(value){\r\n\t\t\t\tif(value.length < 5){\r\n\t\t\t\t\t//如果传过来的经纬度长度小于8位就返回原来的\r\n\t\t\t\t\treturn value\r\n\t\t\t\t}else {\r\n\t\t\t\t\t//截取当前位数到小数点后2位\r\n\t\t\t\t\tlet tempVal = parseFloat(value).toFixed(2)\r\n\t\t\t\t\tlet realVal = tempVal.substring(0,tempVal.length-1)\r\n\t\t\t\t\treturn realVal\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t}\r\n\t\r\n</script>\r\n\r\n<style>\r\n\tpage,\r\n\t.myView {\r\n\t\tflex-direction: column;\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground: #F1F1F1;\r\n\t}\r\n\t/* 顶部背景图 */\r\n\t.topImage{\r\n\t\tmargin-top: -1rpx;\r\n\t}\r\n\t/* 起终点的view */\r\n\t.station {\r\n\t\tposition: relative;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tmargin-top: -100rpx;\r\n\t\tmargin-left: 30rpx;\r\n\t\tmargin-right: 30rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding-bottom: 40rpx;\r\n\t}\r\n\t/* 查询按钮 */\r\n\t.queryButton{\r\n\t\tmargin-top: 30rpx;\r\n\t\tmargin-left: 20rpx;\r\n\t\tmargin-right: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tbackground-color: #35C762;\r\n\t\tcolor: #FFFFFF;\r\n\t\tborder-radius: 12rpx;\r\n\t\theight: 90rpx;\r\n\t\tfont-size: 38rpx;\r\n\t}\r\n\t/* 标题：附近 */\r\n\t.around{\r\n\t\tfont-size: 32rpx;\r\n\t\tcolor: #343434;\r\n\t\tmargin-left: 40rpx;\r\n\t\tmargin-top: 20rpx;\r\n\t\tfont-weight: 900;\r\n\t}\r\n\t/* 显示附近的站点的view */\r\n\t.aroundView{\r\n\t\tmargin-top: 20rpx;\r\n\t\tmargin-left: 30rpx;\r\n\t\tmargin-right: 30rpx;\r\n\t\tborder-radius: 12rpx;\r\n\t\tbackground-color: #FFFFFF;\r\n\t\tpadding-bottom: 20rpx;\r\n\t}\r\n\t.aroundViewTop{\r\n\t\theight: 100rpx;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row; \r\n\t\talign-items: center;\r\n\t}\r\n\t.aroundImage{\r\n\t\twidth: 27rpx;\r\n\t\theight: 32rpx;\r\n\t\tmargin-left: 36rpx;\r\n\t}\r\n\t.aroundStation{\r\n\t\tmargin-left: 20rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\tfont-weight: 900;\r\n\t}\r\n\t.distance{\r\n\t\tmargin-left: 20rpx;\r\n\t\tfont-size: 24rpx;\r\n\t\tfont-weight: 300;\r\n\t\tcolor: #343434;\r\n\t}\r\n\t.lineView{\r\n\t\tmargin-top: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\t.lineText{\r\n\t\tfont-weight: 300;\r\n\t\tfont-size: 25rpx;\r\n\t\tcolor: #343434;\r\n\t}\r\n\t.bottomView{\r\n\t\theight: 60rpx;\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t.more{\r\n\t\tcolor: #888888;\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 300;\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./BusQuery.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./BusQuery.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}