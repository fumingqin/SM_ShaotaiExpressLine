{"version":3,"sources":["uni-app:///main.js","webpack:///D:/UAD/NP_ComprehensiveTravel/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue?ea34","webpack:///D:/UAD/NP_ComprehensiveTravel/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue?d0e3","webpack:///D:/UAD/NP_ComprehensiveTravel/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue?27fe","webpack:///D:/UAD/NP_ComprehensiveTravel/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue?ff32","uni-app:///pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue","webpack:///D:/UAD/NP_ComprehensiveTravel/pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue?2311"],"names":["createPage","Page","renderjs","component","options","__file","components","uEmpty","render","_vm","this","_h","$createElement","l0","_self","_c","__map","allTicketsList","item","index","$orig","__get_orig","m0","isFlowTickets","m1","m2","turnDate","setTime","g0","shuttleType","duration","slice","g1","m3","turnValue","lineViaSiteDesc","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,mF,mDACAA,EAAWC,a;;;;2DCHX,iSACIC,EADJ,0KASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,iEACZ,aAAAF,E;;;;2GCvBf,gpC;;;;2GCAA,8LAAIG,EAAa,CACfC,OAAQ,WACN,OAAO,yKAKPC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,MAAMP,EAAIQ,gBAAgB,SAASC,EAAMC,GACpD,IAAIC,EAAQX,EAAIY,WAAWH,GAEvBI,EAAKb,EAAIc,cAAcL,GACvBM,EAAKf,EAAIc,cAAcL,GACvBO,EAAKhB,EAAIiB,SAASR,EAAKS,SACvBC,EAAyB,QAApBV,EAAKW,YAAwBX,EAAKY,SAASC,MAAM,GAAI,GAAK,KAC/DC,EAAyB,QAApBd,EAAKW,YAAwBX,EAAKY,SAASC,MAAM,GAAI,GAAK,KAC/DE,EACkB,QAApBf,EAAKW,YACDpB,EAAIyB,UAAUhB,EAAKiB,iBACnB,KACN,MAAO,CACLf,MAAOA,EACPE,GAAIA,EACJE,GAAIA,EACJC,GAAIA,EACJG,GAAIA,EACJI,GAAIA,EACJC,GAAIA,OAIRxB,EAAI2B,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACL3B,GAAIA,MAKR4B,GAAmB,EACnBC,EAAkB,GACtBlC,EAAOmC,eAAgB,G;;;;2DC7CvB,2wBAAotB,eAAG,G;;;;0ICkFvtB,sCAEA,0E,wVACA,CACA,YACA,gBAEA,KAJA,WAKA,OACA,gBACA,aACA,eACA,QACA,cACA,iBACA,SACA,gBACA,cACA,YACA,iBACA,gBACA,aACA,eACA,mBACA,sBACA,qBACA,oBAOA,OA9BA,SA8BA,GACA,aACA,iBACA,cAGA,WACA,8BACA,0BACA,sBACA,iCACA,+BACA,6BAEA,gBAMA,mBACA,0BAGA,cAEA,mBAEA,6BAMA,6BACA,aACA,iBACA,cAEA,+BAGA,SACA,UADA,WAEA,WACA,cACA,uBACA,oBAEA,OACA,6BAEA,aAGA,iBAEA,gBAKA,0BACA,WACA,aACA,iBACA,iBAEA,YACA,YAEA,oBAEA,SAKA,oDAKA,eACA,WACA,uDACA,6DACA,MACA,aACA,6BACA,yBACA,QAEA,oBACA,wBACA,qBACA,gBACA,aACA,gBAEA,eACA,eACA,uBACA,yCACA,QACA,0BACA,iCAEA,uCAGA,qBACA,mBAGA,aACA,eACA,cAEA,sBAEA,cAGA,aACA,eACA,cAEA,kBAGA,KA/CA,SA+CA,GAEA,aACA,uBACA,cAEA,oBAMA,+BACA,6BACA,+BACA,wFACA,WACA,YACA,SAIA,UAGA,wBACA,mBACA,qBACA,qBAGA,2BACA,0BACA,qCACA,cAIA,SA/HA,SA+HA,GACA,yBACA,iBACA,UAGA,0BAGA,yBACA,qCACA,KAEA,MAKA,iBAjJA,SAiJA,GACA,YACA,mBACA,oBAIA,WAxJA,SAwJA,GAEA,GADA,mBACA,GACA,wBACA,kBAGA,4BAEA,IADA,SACA,gCACA,gFACA,KACA,oBAIA,OACA,kBACA,aACA,sBACA,mBACA,iBACA,2CACA,oBACA,oBACA,oBAIA,qBACA,OACA,OACA,iBAOA,oBACA,WACA,gBACA,WACA,yCACA,+CACA,+CACA,MACA,8BACA,iCACA,sBACA,yCACA,sCACA,0BACA,uBAEA,oBACA,gBACA,eACA,SACA,iBACA,aACA,mBAEA,kBACA,aACA,iBACA,gBAKA,KA7BA,SA6BA,GACA,mBAMA,aAtOA,SAsOA,GACA,WAEA,wBACA,wDACA,aACA,sBACA,QAFA,SAEA,GACA,WACA,qBAMA,0BAEA,8BACA,aACA,aACA,8CACA,QAHA,SAGA,GACA,WACA,eAMA,gBAEA,CACA,OACA,qBACA,4BACA,yBACA,gCACA,kCACA,yBAEA,cACA,wBACA,OACA,QAHA,WAIA,cACA,+DAGA,KARA,WASA,wBAMA,mBAEA,cACA,iBACA,OACA,QAHA,WAIA,cACA,2BAGA,KARA,WASA,uBAMA,sBACA,IACA,EACA,EACA,EACA,EAJA,wBAKA,MACA,kBACA,iBACA,aACA,cACA,gDACA,sDACA,sDAWA,OAPA,YAEA,gBACA,UACA,cAGA,KACA,EACA,KACA,EACA,KAsBA,KACA,EACA,KACA,EAEA,QA1BA,KACA,KAEA,KACA,KAEA,KACA,KAEA,KACA,KAEA,KACA,KAEA,KACA,KAEA,KACA,UADA,GAYA,SAzWA,SAyWA,GACA,WACA,KAGA,kBACA,WACA,mBACA,wBAGA,aACA,WACA,uBACA,CACA,2BACA,2BACA,cAIA,mBACA,qBACA,2CAEA,oBACA,oBACA,oBAIA,qBACA,OACA,OACA,eAMA,aAjZA,WAkZA,+BA0FA,UA5eA,SA4eA,GACA,MACA,0BACA,a;;;;2DC5oBA,+0CAAiyC,eAAG,G","file":"pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./selectTickets.vue?vue&type=template&id=19d7a8f6&\"\nvar renderjs\nimport script from \"./selectTickets.vue?vue&type=script&lang=js&\"\nexport * from \"./selectTickets.vue?vue&type=script&lang=js&\"\nimport style0 from \"./selectTickets.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages_ZXGP/pages/ZXGP/TraditionSpecial/Order/selectTickets.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectTickets.vue?vue&type=template&id=19d7a8f6&\"","var components = {\n  uEmpty: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-empty/u-empty\" */ \"@/uview-ui/components/u-empty/u-empty.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.allTicketsList, function(item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var m0 = _vm.isFlowTickets(item)\n    var m1 = _vm.isFlowTickets(item)\n    var m2 = _vm.turnDate(item.setTime)\n    var g0 = item.shuttleType == \"普通班车\" ? item.duration.slice(0, -2) : null\n    var g1 = item.shuttleType == \"定制班车\" ? item.duration.slice(0, -2) : null\n    var m3 =\n      item.shuttleType == \"定制班车\"\n        ? _vm.turnValue(item.lineViaSiteDesc)\n        : null\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1,\n      m2: m2,\n      g0: g0,\n      g1: g1,\n      m3: m3\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectTickets.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectTickets.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- 班次列表 -->\r\n\t<view class=\"se_myView\">\r\n\t\t<!-- 顶部时间选项卡 -->\r\n\t\t<view class=\"mv_headerClass\">\r\n\t\t\t<scroll-view class=\"hc_scrollClass\" scroll-x>\r\n\t\t\t\t<view class=\"sc_blockClass\" :class=\"selectIndex == index ? 'viewPress': '' \" v-for=\"(item,index) in dateArray\" :key=\"index\"\r\n\t\t\t\t @click=\"viewClick(index,item)\" v-model=\"selectIndex\">\r\n\t\t\t\t\t<view class=\"textCLass\">\r\n\t\t\t\t\t\t<view class=\"weekClass\">{{item.week}}</view>\r\n\t\t\t\t\t\t<view class=\"dateClass\">{{item.date}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<view class=\"hc_SelectTime\">\r\n\t\t\t\t<image src=\"../../../../static/ZXGP/calendar.png\" class=\"calendarImage\" @click=\"onShowDatePicker('date')\"></image>\r\n\t\t\t</view>\r\n\t\t\t<mx-date-picker :show=\"showPicker\" :type=\"type\" :value=\"value\" :show-tips=\"true\" :begin-text=\"'入住'\" :end-text=\"'离店'\"\r\n\t\t\t :show-seconds=\"true\" @confirm=\"onSelected\" @cancel=\"onSelected\" />\r\n\t\t</view>\r\n\r\n\t\t<view v-if=\"departureData.length == 0 \" style=\"margin-top: 400upx;\">\r\n\t\t\t<u-empty text=\"今天没有班次哦~\" mode=\"list\"></u-empty>\r\n\t\t</view>\r\n\r\n\t\t<!-- 车票内容部分 -->\r\n\t\t<view class=\"ctky_View\" v-for=\"(item,index) in allTicketsList\" :key=\"index\" @click=\"ticketDetail(allTicketsList[index])\">\r\n\t\t\t<view class=\"ctky_View_Left\">\r\n\t\t\t\t<!-- 顶部车票类型+发车时间 -->\r\n\t\t\t\t<view class=\"ctky_View_Left_content\">\r\n\t\t\t\t\t<view class=\"markType\" style=\"border:#1EA2FF solid 1px;color:#1EA2FF;\" v-if=\"item.shuttleType == '普通班车' && isFlowTickets(item) == '普通'\">普通班车</view>\r\n\t\t\t\t\t<view class=\"markType\" style=\"border:#FF5A00 solid 1px;color:#FF5A00;\" v-if=\"item.shuttleType == '定制班车'\">定制班车</view>\r\n\t\t\t\t\t<view class=\"busMarkType\" style=\"border:#FF5A00 solid 1px;color:#FF5A00;\" v-if=\"item.shuttleType == '定制巴士'\">定制巴士</view>\r\n\t\t\t\t\t<view class=\"markType\" style=\"border:#1EA2FF solid 1px;color:#1EA2FF;\" v-if=\"item.shuttleType == '普通班车' && isFlowTickets(item) == '流水'\">流水</view>\r\n\t\t\t\t\t<view class=\"markTime\">{{turnDate(item.setTime)}}</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 路线 -->\r\n\t\t\t\t<view class=\"ctky_View_Left_Route\">线路:{{item.lineName}}</view>\r\n\r\n\t\t\t\t<!-- 上车点 -->\r\n\t\t\t\t<view class=\"ctky_View_Left_GetOnTheBus\">\r\n\t\t\t\t\t<view class=\"getOnTheBus\">\r\n\t\t\t\t\t\t<image class=\"startDot\" src=\"../../../../static/ZXGP/startDot.png\"></image>\r\n\t\t\t\t\t\t<view class=\"startStaion\">{{item.startStaion}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"Price\" v-if=\"item.shuttleType != '定制巴士'\">全票￥{{item.fare}}</view>\r\n\t\t\t\t\t<!-- <view v-if=\"item.shuttleType != '定制巴士'\" style=\"margin-right: 28upx;font-size: 24upx;font-style:\r\n\t\t\t\t\t\tSourceHanSansSC-Regular; color: #FC4646;\">儿童票￥{{item.halfTicket}}</view> -->\r\n\t\t\t\t\t<view class=\"Price\" v-if=\"item.shuttleType == '定制巴士'\">价格￥{{item.PriceRange}}</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 下车点 -->\r\n\t\t\t\t<view class=\"ctky_View_Left_DropOffPoint\">\r\n\t\t\t\t\t<view class=\"dropOffPoint\">\r\n\t\t\t\t\t\t<image class=\"endDot\" src=\"../../../../static/ZXGP/endDot.png\"></image>\r\n\t\t\t\t\t\t<view class=\"endStation\">{{item.endStation}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"remainingTickets\">余{{item.remainingVotes}}张</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 班车详细信息 -->\r\n\t\t\t\t<view class=\"ctky_View_Left_detailedInformation\" v-if=\"item.shuttleType == '普通班车'\">{{item.carType}}/约{{(item.duration.slice(0,-2))}}分钟/{{item.planScheduleCode}}</view>\r\n\t\t\t\t<view class=\"ctky_View_Left_detailedInformation\" v-if=\"item.shuttleType == '定制班车'\">{{item.carType}}/约{{(item.duration.slice(0,-2))}}分钟/{{item.planScheduleCode}}</view>\r\n\t\t\t\t<view class=\"ctky_View_Left_detailedInformation\" v-if=\"item.shuttleType == '定制巴士'\">{{item.SetoutTimeDesc}}</view>\r\n\r\n\t\t\t\t<!-- 途径站点 -->\r\n\t\t\t\t<view class=\"st_routeSite\" v-if=\"item.shuttleType == '定制班车'\">\r\n\t\t\t\t\t<view class=\"ro_text\">\r\n\t\t\t\t\t\t<text>途径站点:</text>\r\n\t\t\t\t\t\t<text>{{turnValue(item.lineViaSiteDesc)}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!--引用组件-->\r\n\t\t<!-- <u-skeleton bg-color=\"rgb(250, 250, 250)\" :loading=\"loading\" :animation=\"animation\" :el-color=\"elColor\"\r\n\t\t :border-radius=\"borderRadius\"></u-skeleton> -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport $KyInterface from \"@/common/Ctky.js\"\r\n\timport MxDatePicker from \"@/pages_ZXGP/components/ZXGP/mx-datepicker/mx-datepicker.vue\";\r\n\timport utils from \"@/pages_ZXGP/components/ZXGP/shoyu-date/utils.filter.js\";\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tMxDatePicker\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tutils: utils,\r\n\t\t\t\tdateArray: [], //时间轴的数量的数组\r\n\t\t\t\tselectIndex: '', //选中的下标\r\n\t\t\t\tdate: '', //时间轴上选中的日期\r\n\t\t\t\tshowPicker: false,\r\n\t\t\t\ttype: 'rangetime',\r\n\t\t\t\tvalue: '',\r\n\t\t\t\tstartStation: '', //出发站\r\n\t\t\t\tendStation: '', //终点站\r\n\t\t\t\tisNormal: '', //状态\r\n\t\t\t\tdepartureData: [], //班次数据\r\n\t\t\t\tstationArray: [],\r\n\t\t\t\tisEndores: '', //是否是改签\r\n\t\t\t\tendoresDate: '', //改签日期\r\n\t\t\t\tendoresOrderNum: '', //改签的订单编号\r\n\t\t\t\tendorescompanyCode: '',\r\n\t\t\t\tscheduleDetailNum: '', //班次\r\n\t\t\t\tallTicketsList: [], //所有的班次信息（客运+定制巴士）\r\n\t\t\t\t// loading: true, // 是否显示骨架屏组件\r\n\t\t\t\t// animation: true,\r\n\t\t\t\t// elColor: '#e5e5e5',\r\n\t\t\t\t// borderRadius: 10,\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(param) {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '查询班次中...',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t})\r\n\t\t\t// this.getData();\r\n\t\t\tvar that = this;\r\n\t\t\tthat.startStation = param.startStation;\r\n\t\t\tthat.endStation = param.endStation;\r\n\t\t\tthat.isNormal = param.isNormal;\r\n\t\t\tconsole.log('起点', that.startStation)\r\n\t\t\tconsole.log('终点', that.endStation)\r\n\t\t\tconsole.log('状态', that.isNormal)\r\n\t\t\t//如果传过来的参数没有时间就获取当前时间\r\n\t\t\tif (param.date == 'date') { //二维码扫码进来\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\t//获取openid\r\n\t\t\t\tthis.getOpenID();\r\n\t\t\t\t// #endif\r\n\t\t\t\t//初始化时间轴\r\n\t\t\t\tthat.loadDate(param.date);\r\n\t\t\t\tthat.getTicketInfo(param.date);\r\n\t\t\t} else {\r\n\t\t\t\t//班次列表数据参数，从上一个页面传过来的时间，上下车点\r\n\t\t\t\tthat.date = param.date;\r\n\t\t\t\t//初始化时间轴\r\n\t\t\t\tthat.loadDate(param.date);\r\n\t\t\t\t//加载班次列表数据\r\n\t\t\t\tthat.getTicketInfo(this.date);\r\n\t\t\t}\r\n\t\t\t//点击顶部时间，请求该时间的班次列表\r\n\t\t\t// this.getDeparture();\r\n\t\t},\r\n\r\n\t\tonPullDownRefresh: function() {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '查询班次中...',\r\n\t\t\t\ticon: 'none'\r\n\t\t\t});\r\n\t\t\tthis.getTicketInfo(this.date);\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\tgetOpenID() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.getStorage({\r\n\t\t\t\t\tkey: 'scenicSpotOpenId',\r\n\t\t\t\t\tsuccess: function(response) {\r\n\r\n\t\t\t\t\t\tif (response.data) {\r\n\t\t\t\t\t\t\tconsole.log('当前没有有openid', response);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.getCode();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(fail) {\r\n\t\t\t\t\t\t//无openid，请求openid\r\n\t\t\t\t\t\tthat.getCode();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//-------------------------------加载客运班次列表数据-------------------------------\r\n\t\t\tgetTicketInfo: function(date) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '查询班次中...',\r\n\t\t\t\t\ticon: 'loading'\r\n\t\t\t\t})\r\n\t\t\t\tif (date == 'date') {\r\n\t\t\t\t\tdate = new Date();\r\n\t\t\t\t}\r\n\t\t\t\tthat.allTicketsList = [];\r\n\r\n\t\t\t\tvar systemNameCode = '';\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tsystemNameCode = this.$ky_cpdg.KyInterface.system.systemNameWeiXin\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tsystemNameCode = this.$ky_cpdg.KyInterface.system.systemNameWeiXin\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tsystemNameCode = this.$ky_cpdg.KyInterface.system.systemNameH5\r\n\t\t\t\t// #endif\r\n\t\t\t\tconsole.log(systemNameCode)\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: this.$ky_cpdg.KyInterface.getListSchedulesInfo.Url,\r\n\t\t\t\t\tmethod: this.$ky_cpdg.KyInterface.getListSchedulesInfo.method,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tsystemName: systemNameCode,\r\n\t\t\t\t\t\tstartPosition: that.startStation,\r\n\t\t\t\t\t\tendPosition: that.endStation,\r\n\t\t\t\t\t\tdate: date,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.stopPullDownRefresh();\r\n\t\t\t\t\t\tconsole.log('111', res)\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tvar a = res.data;\r\n\t\t\t\t\t\tvar b = JSON.parse(a);\r\n\t\t\t\t\t\t//非空判断\r\n\t\t\t\t\t\tif (b.status == true) {\r\n\t\t\t\t\t\t\tif (b.data !== 0) {\r\n\t\t\t\t\t\t\t\tthat.departureData = b.data;\r\n\t\t\t\t\t\t\t\tconsole.log('111111111', that.departureData)\r\n\t\t\t\t\t\t\t\tlet i = 0;\r\n\t\t\t\t\t\t\t\tfor (i; i < b.data.length; i++) {\r\n\t\t\t\t\t\t\t\t\tthat.allTicketsList.push(b.data[i])\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tconsole.log('客运班次信息', that.allTicketsList)\r\n\t\t\t\t\t\t\t\t//加载定制巴士班次列表数据\r\n\t\t\t\t\t\t\t\t// that.getSpecialBusTicketInfo(date);\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t} else if (b.data.length == 0) {\r\n\t\t\t\t\t\t\t\t//加载定制巴士班次列表数据\r\n\t\t\t\t\t\t\t\t// that.getSpecialBusTicketInfo(date);\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: '暂无班次信息',\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (b.status == false) {\r\n\t\t\t\t\t\t\t//加载定制巴士班次列表数据\r\n\t\t\t\t\t\t\t// that.getSpecialBusTicketInfo(date);\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '暂无班次信息',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\t// console.log(res);\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '服务器异常，班次列表数据出错',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t//-------------------------------班次排序--升序-------------------------------\r\n\t\t\tForwardRankingDate: function(param) {\r\n\t\t\t\tfor (let i = 0; i < param.length - 1; i++) {\r\n\t\t\t\t\tfor (let j = 0; j < param.length - 1 - i; j++) {\r\n\t\t\t\t\t\tif (Date.parse(this.turnDate(param[j].setTime2)) > Date.parse(this.turnDate(param[j + 1].setTime2))) {\r\n\t\t\t\t\t\t\tvar temp = param[j];\r\n\t\t\t\t\t\t\tparam[j] = param[j + 1];\r\n\t\t\t\t\t\t\tparam[j + 1] = temp;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn param;\r\n\t\t\t},\r\n\t\t\t//-------------------------------点击日期-------------------------------\r\n\t\t\tviewClick: function(e, item) {\r\n\t\t\t\tthis.selectIndex = e;\r\n\t\t\t\tthis.date = item.longDate;\r\n\t\t\t\tthis.getDeparture();\r\n\t\t\t},\r\n\t\t\t//-------------------------------获取班次信息-------------------------------\r\n\t\t\tgetScheduleNum: function(param) {\r\n\t\t\t\tif (param.shuttleType != '定制巴士') {\r\n\t\t\t\t\tvar schedule = param.executeScheduleID.split('|');\r\n\t\t\t\t\treturn schedule[1];\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//-------------------------------时间转换-------------------------------\r\n\t\t\tturnDate(date) {\r\n\t\t\t\tvar setTime = date.replace('T', ' ');\r\n\t\t\t\tvar setTime2 = setTime.substr(0, 16);\r\n\t\t\t\treturn setTime2;\r\n\t\t\t},\r\n\t\t\t//-------------------------------判断是否是流水班次-------------------------------\r\n\t\t\tisFlowTickets: function(param) {\r\n\t\t\t\t//传入班次ID，检测是否包含字段‘前’，有字段‘前’即为流水班次\r\n\t\t\t\t//判断返回值为-1表示没有字段‘前’\r\n\t\t\t\tif (param.shuttleType != '定制巴士') {\r\n\t\t\t\t\tif (param.priceID.lastIndexOf('前') != -1) {\r\n\t\t\t\t\t\treturn '流水'\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn '普通'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//-------------------------------显示日期-------------------------------\r\n\t\t\tonShowDatePicker(type) { //显示\r\n\t\t\t\tthis.type = type;\r\n\t\t\t\tthis.showPicker = true;\r\n\t\t\t\tthis.value = this[type];\r\n\t\t\t},\r\n\r\n\t\t\t//-------------------------------选择日期-------------------------------\r\n\t\t\tonSelected(e) {\r\n\t\t\t\tthis.showPicker = false;\r\n\t\t\t\tif (e) {\r\n\t\t\t\t\tthis[this.type] = e.value;\r\n\t\t\t\t\tthis.date = e.value;\r\n\t\t\t\t\t// console.log(e.value)\r\n\t\t\t\t\t//从日历选择时间后刷新列表数据\r\n\t\t\t\t\tthis.getTicketInfo(e.value);\r\n\t\t\t\t\tvar IsExist = false;\r\n\t\t\t\t\tfor (var i = 0; i < this.dateArray.length; i++) {\r\n\t\t\t\t\t\tif ((new Date(this.dateArray[i].longDate)).getTime() == (new Date(this.date)).getTime()) {\r\n\t\t\t\t\t\t\tIsExist = true;\r\n\t\t\t\t\t\t\tthis.selectIndex = i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//判断时间轴上是否存在改日期，不存在则重新绘制\r\n\t\t\t\t\tif (!IsExist) {\r\n\t\t\t\t\t\tthis.dateArray = [];\r\n\t\t\t\t\t\tvar dateToday = new Date(); //获取今天日期\r\n\t\t\t\t\t\tvar date = new Date(this.date); //选中的日期\r\n\t\t\t\t\t\tthis.selectIndex = 0;\r\n\t\t\t\t\t\tfor (var i = 0; i < 8; i++) {\r\n\t\t\t\t\t\t\tvar mydate = new Date(date.getTime() + 24 * i * 60 * 60 * 1000); //日期一天加一次\r\n\t\t\t\t\t\t\tvar nowdate = this.getTime(3, mydate); //获取该日期的缩写  月/日\r\n\t\t\t\t\t\t\tvar week = this.getTime(2, mydate); //获取该日期为周几\r\n\t\t\t\t\t\t\tvar longdate = this.getTime(0, mydate); //获取 年/月/日\r\n\t\t\t\t\t\t\t// if (this.getTime(0, mydate) == this.getTime(0, dateToday)) {\r\n\t\t\t\t\t\t\t// \tweek = '今天';\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\tthis.dateArray.push({\r\n\t\t\t\t\t\t\t\tweek: week,\r\n\t\t\t\t\t\t\t\tdate: nowdate,\r\n\t\t\t\t\t\t\t\tlongDate: longdate,\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//-------------------------------改签请求-------------------------------\r\n\t\t\tendores: function(item) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tuni.showLoading();\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl: $KyInterface.KyInterface.Ky_endorse.Url,\r\n\t\t\t\t\tmethod: $KyInterface.KyInterface.Ky_endorse.method,\r\n\t\t\t\t\theader: $KyInterface.KyInterface.Ky_endorse.header,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\torderNumber: that.endoresOrderNum,\r\n\t\t\t\t\t\tCompanyCode: that.endorescompanyCode,\r\n\t\t\t\t\t\texecuteDate: item.setTime,\r\n\t\t\t\t\t\tsheduleCompanyCode: item.scheduleCompanyCode,\r\n\t\t\t\t\t\texecuteScheduleID: item.executeScheduleID,\r\n\t\t\t\t\t\tstartSiteID: item.startSiteID,\r\n\t\t\t\t\t\tendSiteID: item.endSiteID,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tif (res.data) {\r\n\t\t\t\t\t\t\tif (res.data.status == true) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.data.msg\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t} else if (res.data.status == false) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle: res.data.msg,\r\n\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t// uni.hideLoading();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//-------------------------------点击班次进行缓存，并打开页面  开始-------------------------------\r\n\t\t\tticketDetail(item) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\t//改签入口\r\n\t\t\t\tif (that.isEndores == 'true') {\r\n\t\t\t\t\tlet content = that.startStation + '-' + that.endStation + '-' + that.endoresDate\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: '是否改签到当前班次' + content,\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\tthat.endores(item)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//如果选择的是传统客运/定制班车就进下面的方法\r\n\t\t\t\t\tif (item.shuttleType != '定制巴士') {\r\n\t\t\t\t\t\t//如果当前选的是流水班次就弹框提示\r\n\t\t\t\t\t\tif (item.priceID.lastIndexOf('前') != -1) {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\t\t\t\tcontent: '流水班车发车时间间隔短、班次多，旅客购买后可乘坐当天任意流水班车出行。',\r\n\t\t\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\tthat.goNext(item);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t//如果选的不是流水班次就直接跳转到下一个页面\r\n\t\t\t\t\t\t\tthat.goNext(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar array = {\r\n\t\t\t\t\t\t\tSetoutTime: item.setTime,\r\n\t\t\t\t\t\t\tStartSiteName: item.startStaion,\r\n\t\t\t\t\t\t\tEndSiteName: item.endStation,\r\n\t\t\t\t\t\t\tremainingVotes: item.remainingVotes,\r\n\t\t\t\t\t\t\tLineViaSiteName: item.LineViaSiteName,\r\n\t\t\t\t\t\t\tScheduleID: item.ScheduleID,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\tkey: 'specialTicketDate',\r\n\t\t\t\t\t\t\tdata: array,\r\n\t\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\turl: '../../SpecialBus/ScheduleLineList/specialBusTakeOrder'\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail() {\r\n\t\t\t\t\t\t\t\tconsole.log('123');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgoNext: function(item) {\r\n\r\n\t\t\t\tuni.setStorage({\r\n\t\t\t\t\tkey: 'ticketDate',\r\n\t\t\t\t\tdata: item,\r\n\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: './scheduleDetails'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail() {\r\n\t\t\t\t\t\tconsole.log('123');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//-------------------------------点击班次进行缓存，并打开页面  结束-------------------------------\r\n\t\t\t//日期时间转换函数   type 0 年月日 ，1 时分秒 ， 2 星期 ，3 月/日  4几月几日\r\n\t\t\tgetTime: function(type, date1) {\r\n\t\t\t\tlet date = new Date(date1.getTime()),\r\n\t\t\t\t\tcurrentDate,\r\n\t\t\t\t\tcurrentTime,\r\n\t\t\t\t\tsortDate,\r\n\t\t\t\t\tmonthAndDay,\r\n\t\t\t\t\tseperator = \"/\", // 如果想要其他格式 只需 修改这里 \r\n\t\t\t\t\tyear = date.getFullYear(),\r\n\t\t\t\t\tmonth = date.getMonth() + 1,\r\n\t\t\t\t\tweex = date.getDay(),\r\n\t\t\t\t\tday = date.getDate(),\r\n\t\t\t\t\thour = date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours(),\r\n\t\t\t\t\tminute = date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes(),\r\n\t\t\t\t\tsecond = date.getSeconds() < 10 ? \"0\" + date.getSeconds() : date.getSeconds();\r\n\t\t\t\t// month >= 1 && month <= 9 ? (month = \"0\" + month) : \"\";\r\n\t\t\t\t// day >= 0 && day <= 9 ? (day = \"0\" + day) : \"\";\r\n\t\t\t\t//当前 日期\r\n\t\t\t\tcurrentDate = year + seperator + month + seperator + day;\r\n\t\t\t\t//当前 时间\r\n\t\t\t\tcurrentTime = hour + \":\" + minute + \":\" + second;\r\n\t\t\t\tsortDate = month + \"/\" + day;\r\n\t\t\t\tmonthAndDay = month + \"月\" + day + \"日\";\r\n\t\t\t\t// 输出格式 为 2018-8-27 14:45:33\r\n\t\t\t\t// console.log(currentDate +\" \"+ currentTime);\r\n\t\t\t\tif (type == 0) {\r\n\t\t\t\t\treturn currentDate\r\n\t\t\t\t} else if (type == 1) {\r\n\t\t\t\t\treturn currentTime;\r\n\t\t\t\t} else if (type == 2) {\r\n\t\t\t\t\tif (weex == 1) {\r\n\t\t\t\t\t\treturn '周一'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (weex == 2) {\r\n\t\t\t\t\t\treturn '周二'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (weex == 3) {\r\n\t\t\t\t\t\treturn '周三'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (weex == 4) {\r\n\t\t\t\t\t\treturn '周四'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (weex == 5) {\r\n\t\t\t\t\t\treturn '周五'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (weex == 6) {\r\n\t\t\t\t\t\treturn '周六'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (weex == 0) {\r\n\t\t\t\t\t\treturn '周日'\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (type == 3) {\r\n\t\t\t\t\treturn sortDate;\r\n\t\t\t\t} else if (type == 4) {\r\n\t\t\t\t\treturn monthAndDay;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn currentDate + \" \" + currentTime;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//-------------------------------初始化时间轴-------------------------------\r\n\t\t\tloadDate(param) {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tvar date = '';\r\n\r\n\t\t\t\t//从二维码进到这个页面，使用系统时间\r\n\t\t\t\tif (param.date == 'date') {\r\n\t\t\t\t\tdate = new Date();\r\n\t\t\t\t\tthat.getTicketInfo(date);\r\n\t\t\t\t\tconsole.log('二维码');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//从首页进来，对时间格式进行操作\r\n\t\t\t\t\tif (param == 'date') {\r\n\t\t\t\t\t\tdate = new Date();\r\n\t\t\t\t\t\tthat.getTicketInfo(date);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar subStr = new RegExp('-', 'ig');\r\n\t\t\t\t\t\tvar result = this.date.replace(subStr, \"/\");\r\n\t\t\t\t\t\tdate = new Date(result);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t// var mydate = this.date;\r\n\t\t\t\tthis.selectIndex = 0;\r\n\t\t\t\tfor (var i = 0; i < 7; i++) {\r\n\t\t\t\t\tvar mydate = new Date(date.getTime() + 24 * i * 60 * 60 * 1000);\r\n\r\n\t\t\t\t\tvar nowdate = this.getTime(3, mydate);\r\n\t\t\t\t\tvar week = this.getTime(2, mydate);\r\n\t\t\t\t\tvar longdate = this.getTime(0, mydate);\r\n\t\t\t\t\t// if (mydate.getTime() == date.getTime()) {\r\n\t\t\t\t\t// \tweek = '今天';\r\n\t\t\t\t\t// }\r\n\t\t\t\t\tthis.dateArray.push({\r\n\t\t\t\t\t\tweek: week,\r\n\t\t\t\t\t\tdate: nowdate,\r\n\t\t\t\t\t\tlongDate: longdate,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//-----------------------点击顶部时间，请求该时间的班次列表--------------------------------\r\n\t\t\tgetDeparture() {\r\n\t\t\t\tthis.getTicketInfo(this.date);\r\n\t\t\t},\r\n\t\t\t// #ifdef  H5\r\n\t\t\t//获取openid\r\n\t\t\tgetCode() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet Appid = \"wx14af28006f937f6e\"; //appid\r\n\t\t\t\tlet code = this.getUrlParam('code'); //是否存在code\r\n\r\n\t\t\t\tlet local = $KyInterface.KyInterface.Ky_getListSchedulesInfo.Url;\r\n\t\t\t\tif (code == null || code === \"\") {\r\n\t\t\t\t\t//不存在就打开上面的地址进行授权\r\n\t\t\t\t\twindow.location.href =\r\n\t\t\t\t\t\t\"https://open.weixin.qq.com/connect/oauth2/authorize?appid=\" +\r\n\t\t\t\t\t\tAppid +\r\n\t\t\t\t\t\t\"&redirect_uri=\" +\r\n\t\t\t\t\t\tencodeURIComponent(local) +\r\n\t\t\t\t\t\t\"&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 存在则通过code传向后台调用接口返回微信的个人信息\r\n\t\t\t\t\t// #ifdef H5\r\n\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl: 'https://27.148.155.9:9056/CTKY/getWxUserinfo?code=' + code + '&Appid=' + Appid +\r\n\t\t\t\t\t\t\t'&Appsecret=9cda28b050341aca1f674d2043b01358',\r\n\t\t\t\t\t\theader: $KyInterface.KyInterface.Ky_getListSchedulesInfo.header,\r\n\t\t\t\t\t\tmethod: $KyInterface.KyInterface.Ky_getListSchedulesInfo.method,\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tconsole.log(res, \"res\")\r\n\t\t\t\t\t\t\tuni.setStorageSync('scenicSpotOpenId', res.data.openid)\r\n\t\t\t\t\t\t\tuni.setStorageSync('wxuserInfo', res.data)\r\n\t\t\t\t\t\t\tlet openid = res.data.openid;\r\n\t\t\t\t\t\t\tconsole.log(openid, \"openid\")\r\n\t\t\t\t\t\t\tif (openid != \"\" && openid != null && openid != undefined) {\r\n\t\t\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\t\t\t//url:'http://zntc.145u.net/api/person/changeInfo',\r\n\t\t\t\t\t\t\t\t\turl: that.$GrzxInter.Interface.GetUserInfoByOpenId_wx.value,\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\topenId_wx: openid,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tmethod: that.$GrzxInter.Interface.GetUserInfoByOpenId_wx.method,\r\n\t\t\t\t\t\t\t\t\tsuccess(res1) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(res1, 'res1')\r\n\t\t\t\t\t\t\t\t\t\t//判断是否有绑定手机号\r\n\t\t\t\t\t\t\t\t\t\tif (res1.data.msg == \"获取用户信息失败,不存在该openID用户信息\") {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: '您未绑定手机号，请绑定手机号！',\r\n\t\t\t\t\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\turl: '/pages/GRZX/wxLogin'\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(openid, 'openid1')\r\n\t\t\t\t\t\t\t\t\t\tif (openid == res1.data.data.openId_wx && openid != \"\") {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.setStorageSync('userInfo', res1.data.data)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: \"err是\" + err.errMsg,\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//判断code信息是否存在\r\n\t\t\tgetUrlParam(name) {\r\n\t\t\t\tvar reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)')\r\n\t\t\t\tlet url = window.location.href.split('#')[0]\r\n\t\t\t\tlet search = url.split('?')[1]\r\n\t\t\t\tif (search) {\r\n\t\t\t\t\tvar r = search.substr(0).match(reg)\r\n\t\t\t\t\tif (r !== null) return unescape(r[2])\r\n\t\t\t\t\treturn null\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn null\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//#endif  \r\n\r\n\t\t\t//-------------------------------转换-------------------------------\r\n\t\t\tturnValue(value) {\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tvar setValue = value.replace(/,/g, '、');\r\n\t\t\t\t\treturn setValue;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//-------------------------------调隐藏骨架屏-------------------------------\r\n\t\t\t// getData() {\r\n\t\t\t// \tthis.loading = true;\r\n\t\t\t// \t// 通过延时模拟向后端请求数据，调隐藏骨架屏\r\n\t\t\t// \tsetTimeout(() => {\r\n\t\t\t// \t\tthis.loading = false;\r\n\t\t\t// \t}, 3000)\r\n\t\t\t// }\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\tpage,\r\n\t.se_myView {\r\n\t\tflex-direction: column;\r\n\t\t// width: 100%;\r\n\t\t// height: 100%;\r\n\t\tbackground: #F1F1F1;\r\n\t}\r\n\r\n\t.mv_headerClass {\r\n\t\tposition: sticky;\r\n\t\ttop: 0;\r\n\t\twidth: 100%;\r\n\t\tbackground: #FFFFFF;\r\n\t\theight: 109upx;\r\n\t\t//padding-left: 10upx;\r\n\t\tmargin-bottom: 10upx;\r\n\t\tdisplay: flex;\r\n\t\tz-index: 9999999999999;\r\n\t}\r\n\r\n\t.hc_scrollClass {\r\n\t\tposition: sticky;\r\n\t\ttop: 0;\r\n\t\theight: 109upx;\r\n\t\twidth: 86%;\r\n\t\twhite-space: nowrap; //外层写这俩\r\n\t\tflex-wrap: nowrap;\r\n\t}\r\n\r\n\t.sc_blockClass {\r\n\t\tmargin: 12upx 14upx;\r\n\t\t//background: #FFFFFF;\r\n\t\twidth: 87upx;\r\n\t\theight: 84upx;\r\n\t\tborder-radius: 8upx;\r\n\t\tdisplay: inline-block; //里层写这个\r\n\t}\r\n\r\n\t.textCLass {\r\n\t\tmargin: 9upx 17upx;\r\n\t}\r\n\r\n\t.weekClass {\r\n\t\t//display: block;\r\n\t\tfont-size: 26upx;\r\n\t\tfont-family: MicrosoftYaHei;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #333333;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.dateClass {\r\n\t\t//display: block;\r\n\t\tfont-size: 24upx;\r\n\t\tfont-family: MicrosoftYaHei;\r\n\t\tfont-weight: 400;\r\n\t\tcolor: #333333;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.viewPress {\r\n\t\tbackground: #DD524D;\r\n\r\n\t\t.weekClass {\r\n\t\t\tcolor: #FFFFFF;\r\n\t\t}\r\n\r\n\t\t.dateClass {\r\n\t\t\tcolor: #FFFFFF;\r\n\t\t}\r\n\t}\r\n\r\n\t//选择时间\r\n\t.hc_SelectTime {\r\n\t\twidth: 14%;\r\n\t\theight: 100%;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tdisplay: flex;\r\n\r\n\t\t.calendarImage {\r\n\t\t\twidth: 35upx;\r\n\t\t\theight: 37upx;\r\n\t\t}\r\n\t}\r\n\r\n\t.ctky_View {\r\n\t\twidth: 94%;\r\n\t\tbackground: #FFFFFF;\r\n\t\tmargin: 16upx 3%;\r\n\t\tborder-radius: 20upx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\r\n\t\t.ctky_View_Left {\r\n\t\t\ttext-align: left;\r\n\t\t\tdisplay: flex;\r\n\t\t\tflex-direction: column;\r\n\t\t\twidth: 100%;\r\n\t\t\tpadding: 12upx 0;\r\n\r\n\t\t\t//车票模式\r\n\t\t\t.ctky_View_Left_content {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin: 20upx 25upx;\r\n\r\n\t\t\t\t.busMarkType {\r\n\t\t\t\t\t// width: 65upx;\r\n\t\t\t\t\tpadding: 0 10rpx;\r\n\t\t\t\t\theight: 37upx;\r\n\t\t\t\t\tline-height: 37rpx;\r\n\t\t\t\t\tborder-radius: 14upx;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tfont-size: 24upx;\r\n\t\t\t\t\tfont-family: SourceHanSansSC-Light;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.markType {\r\n\t\t\t\t\twidth: 128upx;\r\n\t\t\t\t\theight: 37upx;\r\n\t\t\t\t\tline-height: 37rpx;\r\n\t\t\t\t\tborder-radius: 20upx;\r\n\t\t\t\t\ttext-align: center;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tfont-size: 24upx;\r\n\t\t\t\t\tfont-family: SourceHanSansSC-Light;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.markTime {\r\n\t\t\t\t\tmargin-left: 19upx;\r\n\t\t\t\t\tfont-family: SourceHanSansSC-Bold;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//路线\r\n\t\t\t.ctky_View_Left_Route {\r\n\t\t\t\tmargin-left: 24upx;\r\n\t\t\t\tmargin-bottom: 16upx;\r\n\t\t\t\tfont-size: 30upx;\r\n\t\t\t\tfont-style: SourceHanSansSC-Regular;\r\n\t\t\t\tcolor: #333333;\r\n\t\t\t}\r\n\r\n\t\t\t//上车点\r\n\t\t\t.ctky_View_Left_GetOnTheBus {\r\n\t\t\t\tmargin-left: 24upx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-bottom: 16upx;\r\n\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\t.getOnTheBus {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\t.startDot {\r\n\t\t\t\t\t\twidth: 10upx;\r\n\t\t\t\t\t\theight: 10upx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.startStaion {\r\n\t\t\t\t\t\tmargin-left: 16upx;\r\n\t\t\t\t\t\tfont-size: 30upx;\r\n\t\t\t\t\t\tfont-style: SourceHanSansSC-Regular;\r\n\t\t\t\t\t\tcolor: #333333;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.Price {\r\n\t\t\t\t\tmargin-right: 28upx;\r\n\t\t\t\t\tfont-size: 24upx;\r\n\t\t\t\t\tfont-style: SourceHanSansSC-Regular;\r\n\t\t\t\t\tcolor: #FC4646;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//下车点\r\n\t\t\t.ctky_View_Left_DropOffPoint {\r\n\t\t\t\tmargin-left: 25upx;\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-bottom: 16upx;\r\n\t\t\t\tjustify-content: space-between;\r\n\r\n\t\t\t\t.dropOffPoint {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\t.endDot {\r\n\t\t\t\t\t\twidth: 10upx;\r\n\t\t\t\t\t\theight: 10upx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.endStation {\r\n\t\t\t\t\t\tmargin-left: 16upx;\r\n\t\t\t\t\t\tfont-size: 30upx;\r\n\t\t\t\t\t\tfont-style: SourceHanSansSC-Regular;\r\n\t\t\t\t\t\tcolor: #333333;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.remainingTickets {\r\n\t\t\t\t\tmargin-right: 28upx;\r\n\t\t\t\t\tfont-size: 24upx;\r\n\t\t\t\t\tfont-style: SourceHanSansSC-Light;\r\n\t\t\t\t\tcolor: #666666;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//班次详细信息\r\n\t\t\t.ctky_View_Left_detailedInformation {\r\n\t\t\t\tmargin-left: 25upx;\r\n\t\t\t\tmargin-bottom: 10upx;\r\n\t\t\t\tfont-style: SourceHanSansSC-Light;\r\n\t\t\t\tfont-weight: lighter;\r\n\t\t\t\tfont-size: 28upx;\r\n\t\t\t\tcolor: #666666;\r\n\t\t\t\tmargin-top: 6upx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//途径点\r\n\t.st_routeSite {\r\n\t\tmargin-left: 25upx;\r\n\t\tmargin-bottom: 20upx;\r\n\t\tfont-style: SourceHanSansSC-Light;\r\n\t\tfont-weight: lighter;\r\n\t\tfont-size: 28upx;\r\n\t\tcolor: #666666;\r\n\t\tdisplay: flex;\r\n\t\twidth: 660upx;\r\n\t\tmargin-top: 6upx;\r\n\r\n\t\t.ro_text {\r\n\t\t\ttext-overflow: ellipsis;\r\n\t\t\twhite-space: nowrap;\r\n\t\t\toverflow: hidden;\r\n\t\t}\r\n\t}\r\n\r\n\t.topView {\r\n\t\tmargin-top: 400upx;\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectTickets.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Software/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./selectTickets.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}